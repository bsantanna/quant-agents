{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Stock EOD Trading Volume","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Stock EOD Trading Volume\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  \\\"config\\\": {\\n    \\\"legend\\\": {\\n      \\\"symbolType\\\": \\\"stroke\\\",\\n      \\\"symbolStrokeWidth\\\": 4,\\n      \\\"symbolSize\\\": 200\\n    }\\n  },\\n  \\\"data\\\": {\\n    \\\"url\\\": {\\n      \\\"%context%\\\": true,\\n      \\\"%timefield%\\\": \\\"date_reference\\\",\\n      \\\"index\\\": \\\"quant-agents_stocks-eod_latest\\\",\\n      \\\"body\\\": {\\n        \\\"aggs\\\": {\\n          \\\"time_buckets\\\": {\\n            \\\"date_histogram\\\": {\\n              \\\"field\\\": \\\"date_reference\\\",\\n              \\\"calendar_interval\\\": \\\"1d\\\",\\n              \\\"extended_bounds\\\": {\\n                \\\"min\\\": {\\n                  \\\"%timefilter%\\\": \\\"min\\\"\\n                },\\n                \\\"max\\\": {\\n                  \\\"%timefilter%\\\": \\\"max\\\"\\n                }\\n              },\\n              \\\"min_doc_count\\\": 0\\n            },\\n            \\\"aggs\\\": {\\n              \\\"volume\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_volume\\\"\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"size\\\": 0\\n      }\\n    },\\n    \\\"format\\\": {\\n      \\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"\\n    }\\n  },\\n  \\\"transform\\\": [\\n    {\\n      \\\"filter\\\": \\\"datum.volume.value != null\\\"\\n    },\\n    {\\n      \\\"fold\\\": [\\n        \\\"volume.value\\\"\\n      ],\\n      \\\"as\\\": [\\n        \\\"series\\\",\\n        \\\"value\\\"\\n      ]\\n    },\\n    {\\n      \\\"calculate\\\": \\\"datum.series === 'volume.value' ? 'Volume' : ''\\\",\\n      \\\"as\\\": \\\"series_name\\\"\\n    },\\n    {\\n      \\\"filter\\\": \\\"datum.value != null\\\"\\n    }\\n  ],\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"bar\\\"\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\",\\n          \\\"title\\\": null\\n        },\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"value\\\",\\n          \\\"title\\\": null,\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"scale\\\": {\\n            \\\"zero\\\": false\\n          }\\n        },\\n        \\\"color\\\": {\\n          \\\"field\\\": \\\"series_name\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [\\n              \\\"Volume\\\"\\n            ],\\n            \\\"range\\\": [\\n              \\\"#680EE0\\\"\\n            ]\\n          }\\n        }\\n      }\\n    },\\n    {\\n      \\\"description\\\": \\\"Tooltip layer with pivot for multi-series values\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"filter\\\": \\\"hover\\\"\\n        },\\n        {\\n          \\\"pivot\\\": \\\"series_name\\\",\\n          \\\"value\\\": \\\"value\\\",\\n          \\\"groupby\\\": [\\n            \\\"key_as_string\\\"\\n          ],\\n          \\\"limit\\\": 4,\\n          \\\"op\\\": \\\"mean\\\"\\n        }\\n      ],\\n      \\\"params\\\": [\\n        {\\n          \\\"name\\\": \\\"hover\\\",\\n          \\\"select\\\": {\\n            \\\"type\\\": \\\"point\\\",\\n            \\\"encodings\\\": [\\n              \\\"x\\\"\\n            ],\\n            \\\"nearest\\\": true,\\n            \\\"on\\\": \\\"pointerover\\\"\\n          }\\n        }\\n      ],\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"color\\\": \\\"black\\\",\\n        \\\"strokeOpacity\\\": 0.3,\\n        \\\"strokeWidth\\\": 1\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\"\\n        },\\n        \\\"opacity\\\": {\\n          \\\"condition\\\": {\\n            \\\"param\\\": \\\"hover\\\",\\n            \\\"empty\\\": false,\\n            \\\"value\\\": 1\\n          },\\n          \\\"value\\\": 0\\n        },\\n        \\\"tooltip\\\": [\\n          {\\n            \\\"field\\\": \\\"key_as_string\\\",\\n            \\\"type\\\": \\\"temporal\\\",\\n            \\\"title\\\": \\\"Date: \\\",\\n            \\\"timeUnit\\\": \\\"utcyearmonthdate\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"Volume\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Volume: \\\",\\n            \\\"format\\\": \\\".0f\\\"\\n          }\\n        ]\\n      }\\n    }\\n  ],\\n  \\\"encoding\\\": {\\n    \\\"color\\\": {\\n      \\\"field\\\": \\\"series_name\\\",\\n      \\\"type\\\": \\\"nominal\\\",\\n      \\\"scale\\\": {\\n        \\\"domain\\\": [\\n          \\\"Volume\\\"\\n        ],\\n        \\\"range\\\": [\\n          \\\"#680EE0\\\"\\n        ]\\n      },\\n      \\\"legend\\\": {\\n        \\\"title\\\": null,\\n        \\\"orient\\\": \\\"none\\\",\\n        \\\"direction\\\": \\\"vertical\\\",\\n        \\\"legendX\\\": 15,\\n        \\\"legendY\\\": 15,\\n        \\\"offset\\\": 0,\\n        \\\"labelFontSize\\\": 12,\\n        \\\"symbolSize\\\": 150,\\n        \\\"padding\\\": 8\\n      }\\n    }\\n  }\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2025-11-19T13:52:50.043Z","id":"bfa6dace-96ea-4584-9db3-f07749ad9fb4","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2025-11-19T13:52:50.043Z","version":"WzI0NTcsNl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Stock EOD Candlestick","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Stock EOD Candlestick\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  \\\"config\\\": {\\n    \\\"legend\\\": {\\n      \\\"symbolType\\\": \\\"square\\\",\\n      \\\"symbolStrokeWidth\\\": 4,\\n      \\\"symbolSize\\\": 200\\n    }\\n  },\\n  \\\"data\\\": {\\n    \\\"url\\\": {\\n      \\\"%context%\\\": true,\\n      \\\"%timefield%\\\": \\\"date_reference\\\",\\n      \\\"index\\\": \\\"quant-agents_stocks-eod_latest\\\",\\n      \\\"body\\\": {\\n        \\\"aggs\\\": {\\n          \\\"time_buckets\\\": {\\n            \\\"date_histogram\\\": {\\n              \\\"field\\\": \\\"date_reference\\\",\\n              \\\"calendar_interval\\\": \\\"1d\\\",\\n              \\\"extended_bounds\\\": {\\n                \\\"min\\\": {\\n                  \\\"%timefilter%\\\": \\\"min\\\"\\n                },\\n                \\\"max\\\": {\\n                  \\\"%timefilter%\\\": \\\"max\\\"\\n                }\\n              },\\n              \\\"min_doc_count\\\": 0\\n            },\\n            \\\"aggs\\\": {\\n              \\\"open\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_open\\\"\\n                }\\n              },\\n              \\\"high\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_high\\\"\\n                }\\n              },\\n              \\\"low\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_low\\\"\\n                }\\n              },\\n              \\\"close\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_close\\\"\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"size\\\": 0\\n      }\\n    },\\n    \\\"format\\\": {\\n      \\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"\\n    }\\n  },\\n  \\\"transform\\\": [\\n    {\\n      \\\"filter\\\": \\\"datum.close.value != null && datum.open.value != null && datum.high.value != null && datum.low.value != null\\\"\\n    },\\n    {\\n      \\\"calculate\\\": \\\"min(datum.open.value, datum.close.value)\\\",\\n      \\\"as\\\": \\\"minOC\\\"\\n    },\\n    {\\n      \\\"calculate\\\": \\\"max(datum.open.value, datum.close.value)\\\",\\n      \\\"as\\\": \\\"maxOC\\\"\\n    },\\n    {\\n      \\\"calculate\\\": \\\"datum.close.value > datum.open.value ? 'Bull' : 'Bear'\\\",\\n      \\\"as\\\": \\\"direction\\\"\\n    }\\n  ],\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"strokeWidth\\\": 2\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\",\\n          \\\"title\\\": null\\n        },\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"high.value\\\",\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"title\\\": null,\\n          \\\"scale\\\": {\\n            \\\"zero\\\": false\\n          }\\n        },\\n        \\\"y2\\\": {\\n          \\\"field\\\": \\\"low.value\\\"\\n        },\\n        \\\"color\\\": {\\n          \\\"field\\\": \\\"direction\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [\\n              \\\"Bull\\\",\\n              \\\"Bear\\\"\\n            ],\\n            \\\"range\\\": [\\n              \\\"#33FF57\\\",\\n              \\\"#FF5733\\\"\\n            ]\\n          },\\n          \\\"legend\\\": null\\n        }\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"bar\\\",\\n        \\\"size\\\": 20\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\",\\n          \\\"title\\\": null\\n        },\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"open.value\\\",\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"title\\\": null,\\n          \\\"scale\\\": {\\n            \\\"zero\\\": false\\n          }\\n        },\\n        \\\"y2\\\": {\\n          \\\"field\\\": \\\"close.value\\\"\\n        },\\n        \\\"fill\\\": {\\n          \\\"field\\\": \\\"direction\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [\\n              \\\"Bull\\\",\\n              \\\"Bear\\\"\\n            ],\\n            \\\"range\\\": [\\n              \\\"#33FF57\\\",\\n              \\\"#FF5733\\\"\\n            ]\\n          }\\n        },\\n        \\\"stroke\\\": {\\n          \\\"field\\\": \\\"direction\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [\\n              \\\"Bull\\\",\\n              \\\"Bear\\\"\\n            ],\\n            \\\"range\\\": [\\n              \\\"#33FF57\\\",\\n              \\\"#FF5733\\\"\\n            ]\\n          }\\n        }\\n      }\\n    },\\n    {\\n      \\\"description\\\": \\\"Tooltip layer with pivot for multi-series values\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"filter\\\": \\\"hover\\\"\\n        }\\n      ],\\n      \\\"params\\\": [\\n        {\\n          \\\"name\\\": \\\"hover\\\",\\n          \\\"select\\\": {\\n            \\\"type\\\": \\\"point\\\",\\n            \\\"encodings\\\": [\\n              \\\"x\\\"\\n            ],\\n            \\\"nearest\\\": true,\\n            \\\"on\\\": \\\"pointerover\\\"\\n          }\\n        }\\n      ],\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"color\\\": \\\"black\\\",\\n        \\\"strokeOpacity\\\": 0.3,\\n        \\\"strokeWidth\\\": 1\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\"\\n        },\\n        \\\"opacity\\\": {\\n          \\\"condition\\\": {\\n            \\\"param\\\": \\\"hover\\\",\\n            \\\"empty\\\": false,\\n            \\\"value\\\": 1\\n          },\\n          \\\"value\\\": 0\\n        },\\n        \\\"tooltip\\\": [\\n          {\\n            \\\"field\\\": \\\"key_as_string\\\",\\n            \\\"type\\\": \\\"temporal\\\",\\n            \\\"title\\\": \\\"Date\\\",\\n            \\\"timeUnit\\\": \\\"utcyearmonthdate\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"open.value\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Open\\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"high.value\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"High\\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"low.value\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Low\\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"close.value\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Close\\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          }\\n        ]\\n      }\\n    }\\n  ]\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2025-11-19T13:52:50.043Z","id":"12a0aba4-3b90-440b-98e2-988dc773d2ad","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2025-11-19T13:52:50.043Z","version":"WzI0NTYsNl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Stock Indicator EMA","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Stock Indicator EMA\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  'title': 'Exponential Moving Averages',\\n  \\\"config\\\": {\\n    \\\"legend\\\": {\\n      \\\"symbolType\\\": \\\"stroke\\\",\\n      \\\"symbolStrokeWidth\\\": 4,\\n      \\\"symbolSize\\\": 200\\n    }\\n  },\\n  \\\"data\\\": {\\n    \\\"url\\\": {\\n      \\\"%context%\\\": true,\\n      \\\"%timefield%\\\": \\\"date_reference\\\",\\n      \\\"index\\\": \\\"quant-agents_stocks-eod_latest\\\",\\n      \\\"body\\\": {\\n        \\\"aggs\\\": {\\n          \\\"time_buckets\\\": {\\n            \\\"date_histogram\\\": {\\n              \\\"field\\\": \\\"date_reference\\\",\\n              \\\"calendar_interval\\\": \\\"1d\\\",\\n              \\\"extended_bounds\\\": {\\n                \\\"min\\\": {\\n                  \\\"%timefilter%\\\": \\\"min\\\"\\n                },\\n                \\\"max\\\": {\\n                  \\\"%timefilter%\\\": \\\"max\\\"\\n                }\\n              },\\n              \\\"min_doc_count\\\": 0\\n            },\\n            \\\"aggs\\\": {\\n              \\\"close\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_close\\\"\\n                }\\n              },\\n              \\\"ema10\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"close\\\",\\n                  \\\"window\\\": 1000,\\n                  \\\"script\\\": \\\"double ewma = Double.NaN; double alpha = 2.0 / (10 + 1); for (int i=0; i<values.length; i++) { if (!Double.isNaN(values[i])) { if (Double.isNaN(ewma)) ewma = values[i]; else ewma = alpha * values[i] + (1 - alpha) * ewma; } } return ewma;\\\"\\n                }\\n              },\\n              \\\"ema20\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"close\\\",\\n                  \\\"window\\\": 1000,\\n                  \\\"script\\\": \\\"double ewma = Double.NaN; double alpha = 2.0 / (20 + 1); for (int i=0; i<values.length; i++) { if (!Double.isNaN(values[i])) { if (Double.isNaN(ewma)) ewma = values[i]; else ewma = alpha * values[i] + (1 - alpha) * ewma; } } return ewma;\\\"\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"size\\\": 0\\n      }\\n    },\\n    \\\"format\\\": {\\n      \\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"\\n    }\\n  },\\n  \\\"transform\\\": [\\n    {\\n      \\\"filter\\\": \\\"datum.close.value != null\\\"\\n    },\\n    {\\n      \\\"fold\\\": [\\n        \\\"close.value\\\",\\n        \\\"ema10.value\\\",\\n        \\\"ema20.value\\\"\\n      ],\\n      \\\"as\\\": [\\n        \\\"series\\\",\\n        \\\"value\\\"\\n      ]\\n    },\\n    {\\n      \\\"calculate\\\": \\\"datum.series === 'close.value' ? 'Close' : datum.series === 'ema10.value' ? 'EMA 10' : 'EMA 20'\\\",\\n      \\\"as\\\": \\\"series_name\\\"\\n    },\\n    {\\n      \\\"filter\\\": \\\"datum.value != null\\\"\\n    }\\n  ],\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"line\\\",\\n        \\\"strokeWidth\\\": 3\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\",\\n          \\\"title\\\": null\\n        },\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"value\\\",\\n          \\\"title\\\": null,\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"scale\\\": {\\n            \\\"zero\\\": false\\n          }\\n        },\\n        \\\"color\\\": {\\n          \\\"field\\\": \\\"series_name\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [\\n              \\\"Close\\\",\\n              \\\"EMA 10\\\",\\n              \\\"EMA 20\\\"\\n            ],\\n            \\\"range\\\": [\\n              \\\"#EAAE01\\\",\\n              \\\"#F07680\\\",\\n              \\\"#61A2FF\\\"\\n            ]\\n          }\\n        }\\n      }\\n    },\\n    {\\n      \\\"description\\\": \\\"Tooltip layer with pivot for multi-series values\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"filter\\\": \\\"hover\\\"\\n        },\\n        {\\n          \\\"pivot\\\": \\\"series_name\\\",\\n          \\\"value\\\": \\\"value\\\",\\n          \\\"groupby\\\": [\\\"key_as_string\\\"],\\n          \\\"limit\\\": 3,\\n          \\\"op\\\": \\\"mean\\\"\\n        }\\n      ],\\n      \\\"params\\\": [\\n        {\\n          \\\"name\\\": \\\"hover\\\",\\n          \\\"select\\\": {\\n            \\\"type\\\": \\\"point\\\",\\n            \\\"encodings\\\": [\\\"x\\\"],\\n            \\\"nearest\\\": true,\\n            \\\"on\\\": \\\"pointerover\\\"\\n          }\\n        }\\n      ],\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"color\\\": \\\"black\\\",\\n        \\\"strokeOpacity\\\": 0.3,\\n        \\\"strokeWidth\\\": 1\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\"\\n        },\\n        \\\"opacity\\\": {\\n          \\\"condition\\\": {\\n            \\\"param\\\": \\\"hover\\\",\\n            \\\"empty\\\": false,\\n            \\\"value\\\": 1\\n          },\\n          \\\"value\\\": 0\\n        },\\n        \\\"tooltip\\\": [\\n          {\\n            \\\"field\\\": \\\"key_as_string\\\",\\n            \\\"type\\\": \\\"temporal\\\",\\n            \\\"title\\\": \\\"Date: \\\",\\n            \\\"timeUnit\\\": \\\"utcyearmonthdate\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"Close\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Close: \\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"EMA 10\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"EMA 10: \\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"EMA 20\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"EMA 20: \\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          }\\n        ]\\n      }\\n    }\\n  ],\\n  \\\"encoding\\\": {\\n    \\\"color\\\": {\\n      \\\"field\\\": \\\"series_name\\\",\\n      \\\"type\\\": \\\"nominal\\\",\\n      \\\"scale\\\": {\\n        \\\"domain\\\": [\\n          \\\"Close\\\",\\n          \\\"EMA 10\\\",\\n          \\\"EMA 20\\\"\\n        ],\\n        \\\"range\\\": [\\n          \\\"#EAAE01\\\",\\n          \\\"#F07680\\\",\\n          \\\"#61A2FF\\\"\\n        ]\\n      },\\n      \\\"legend\\\": {\\n        \\\"title\\\": null,\\n        \\\"orient\\\": \\\"none\\\",\\n        \\\"direction\\\": \\\"vertical\\\",\\n        \\\"legendX\\\": 15,\\n        \\\"legendY\\\": 15,\\n        \\\"offset\\\": 0,\\n        \\\"labelFontSize\\\": 12,\\n        \\\"symbolSize\\\": 150,\\n        \\\"padding\\\": 8\\n      }\\n    }\\n  }\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2025-11-19T13:52:50.043Z","id":"50e21226-a1d5-49b0-855c-04b8ec075f5e","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2025-11-23T08:48:58.612Z","updated_by":"u_mGBROF_q5bmFCATbLXAcCwKa0k8JvONAwSruelyKA5E_0","version":"WzI5ODgsNl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Stock Indicator AD","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Stock Indicator AD\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  'title': 'Accumulation/Distribution Line',\\n  \\\"config\\\": {\\n    \\\"legend\\\": {\\n      \\\"symbolType\\\": \\\"stroke\\\",\\n      \\\"symbolStrokeWidth\\\": 4,\\n      \\\"symbolSize\\\": 200\\n    }\\n  },\\n  \\\"data\\\": {\\n    \\\"url\\\": {\\n      \\\"%context%\\\": true,\\n      \\\"%timefield%\\\": \\\"date_reference\\\",\\n      \\\"index\\\": \\\"quant-agents_stocks-eod_latest\\\",\\n      \\\"body\\\": {\\n        \\\"aggs\\\": {\\n          \\\"time_buckets\\\": {\\n            \\\"date_histogram\\\": {\\n              \\\"field\\\": \\\"date_reference\\\",\\n              \\\"calendar_interval\\\": \\\"1d\\\",\\n              \\\"extended_bounds\\\": {\\n                \\\"min\\\": {\\n                  \\\"%timefilter%\\\": \\\"min\\\"\\n                },\\n                \\\"max\\\": {\\n                  \\\"%timefilter%\\\": \\\"max\\\"\\n                }\\n              },\\n              \\\"min_doc_count\\\": 0\\n            },\\n            \\\"aggs\\\": {\\n              \\\"close\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_close\\\"\\n                }\\n              },\\n              \\\"high\\\": {\\n                \\\"max\\\": {\\n                  \\\"field\\\": \\\"val_high\\\"\\n                }\\n              },\\n              \\\"low\\\": {\\n                \\\"min\\\": {\\n                  \\\"field\\\": \\\"val_low\\\"\\n                }\\n              },\\n              \\\"volume\\\": {\\n                \\\"sum\\\": {\\n                  \\\"field\\\": \\\"val_volume\\\"\\n                }\\n              },\\n              \\\"clv\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"c\\\": \\\"close\\\",\\n                    \\\"h\\\": \\\"high\\\",\\n                    \\\"l\\\": \\\"low\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.h == null || params.l == null || params.c == null || Double.isNaN(params.h) || Double.isNaN(params.l) || Double.isNaN(params.c)) return Double.NaN; double range = params.h - params.l; return range == 0 ? 0.0 : ((params.c - params.l) - (params.h - params.c)) / range;\\\"\\n                }\\n              },\\n              \\\"ad_contrib\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"clv\\\": \\\"clv\\\",\\n                    \\\"vol\\\": \\\"volume\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.clv == null || params.vol == null || Double.isNaN(params.clv) || Double.isNaN(params.vol)) return Double.NaN; return params.clv * params.vol;\\\"\\n                }\\n              },\\n              \\\"ad_line\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"ad_contrib\\\",\\n                  \\\"window\\\": 1000,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) return Double.NaN; double sum = 0.0; for (double v : values) { if (!Double.isNaN(v)) { sum += v; } } return sum;\\\"\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"size\\\": 0\\n      }\\n    },\\n    \\\"format\\\": {\\n      \\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"\\n    }\\n  },\\n  \\\"transform\\\": [\\n    {\\n      \\\"filter\\\": \\\"datum.ad_line != null && datum.ad_line.value != null\\\"\\n    },\\n    {\\n      \\\"fold\\\": [\\n        \\\"ad_line.value\\\"\\n      ],\\n      \\\"as\\\": [\\n        \\\"series\\\",\\n        \\\"value\\\"\\n      ]\\n    },\\n    {\\n      \\\"calculate\\\": \\\"'A/D Line'\\\",\\n      \\\"as\\\": \\\"series_name\\\"\\n    },\\n    {\\n      \\\"filter\\\": \\\"datum.value != null\\\"\\n    }\\n  ],\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"line\\\",\\n        \\\"strokeWidth\\\": 2.5,\\n        \\\"interpolate\\\": \\\"monotone\\\"\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\",\\n          \\\"title\\\": null\\n        },\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"value\\\",\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"scale\\\": {\\n            \\\"zero\\\": false\\n          },\\n          \\\"title\\\": \\\"\\\"\\n        },\\n        \\\"color\\\": {\\n          \\\"value\\\": \\\"#F07680\\\"\\n        }\\n      }\\n    },\\n    {\\n      \\\"description\\\": \\\"Tooltip\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"filter\\\": \\\"hover\\\"\\n        },\\n        {\\n          \\\"pivot\\\": \\\"series_name\\\",\\n          \\\"value\\\": \\\"value\\\",\\n          \\\"groupby\\\": [\\n            \\\"key_as_string\\\"\\n          ],\\n          \\\"limit\\\": 1,\\n          \\\"op\\\": \\\"mean\\\"\\n        }\\n      ],\\n      \\\"params\\\": [\\n        {\\n          \\\"name\\\": \\\"hover\\\",\\n          \\\"select\\\": {\\n            \\\"type\\\": \\\"point\\\",\\n            \\\"encodings\\\": [\\n              \\\"x\\\"\\n            ],\\n            \\\"nearest\\\": true,\\n            \\\"on\\\": \\\"pointerover\\\"\\n          }\\n        }\\n      ],\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"color\\\": \\\"black\\\",\\n        \\\"strokeOpacity\\\": 0.3,\\n        \\\"strokeWidth\\\": 1\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\"\\n        },\\n        \\\"opacity\\\": {\\n          \\\"condition\\\": {\\n            \\\"param\\\": \\\"hover\\\",\\n            \\\"empty\\\": false,\\n            \\\"value\\\": 1\\n          },\\n          \\\"value\\\": 0\\n        },\\n        \\\"tooltip\\\": [\\n          {\\n            \\\"field\\\": \\\"key_as_string\\\",\\n            \\\"type\\\": \\\"temporal\\\",\\n            \\\"title\\\": \\\"Date\\\",\\n            \\\"timeUnit\\\": \\\"utcyearmonthdate\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"A/D Line\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"A/D Line\\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          }\\n        ]\\n      }\\n    }\\n  ],\\n  \\\"encoding\\\": {\\n    \\\"color\\\": {\\n      \\\"field\\\": \\\"series_name\\\",\\n      \\\"type\\\": \\\"nominal\\\",\\n      \\\"scale\\\": {\\n        \\\"domain\\\": [\\n          \\\"A/D Line\\\"\\n        ],\\n        \\\"range\\\": [\\n          \\\"#F07680\\\"\\n        ]\\n      },\\n      \\\"legend\\\": {\\n        \\\"title\\\": null,\\n        \\\"orient\\\": \\\"none\\\",\\n        \\\"direction\\\": \\\"vertical\\\",\\n        \\\"legendX\\\": 15,\\n        \\\"legendY\\\": 15,\\n        \\\"offset\\\": 0,\\n        \\\"labelFontSize\\\": 12,\\n        \\\"symbolSize\\\": 150,\\n        \\\"padding\\\": 8\\n      }\\n    }\\n  }\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2025-11-19T13:52:50.043Z","id":"8a014077-965f-4823-ae26-92a0f44ef2fe","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2025-11-23T08:54:00.787Z","updated_by":"u_mGBROF_q5bmFCATbLXAcCwKa0k8JvONAwSruelyKA5E_0","version":"WzI5OTUsNl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}"},"title":"Stock Indicator CCI","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Stock Indicator CCI\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  'title': 'Commodity Channel Index',\\n  \\\"config\\\": {\\n    \\\"legend\\\": {\\n      \\\"symbolType\\\": \\\"stroke\\\",\\n      \\\"symbolStrokeWidth\\\": 4,\\n      \\\"symbolSize\\\": 200\\n    }\\n  },\\n  \\\"data\\\": {\\n    \\\"url\\\": {\\n      \\\"%context%\\\": true,\\n      \\\"%timefield%\\\": \\\"date_reference\\\",\\n      \\\"index\\\": \\\"quant-agents_stocks-eod_latest\\\",\\n      \\\"body\\\": {\\n        \\\"aggs\\\": {\\n          \\\"time_buckets\\\": {\\n            \\\"date_histogram\\\": {\\n              \\\"field\\\": \\\"date_reference\\\",\\n              \\\"calendar_interval\\\": \\\"1d\\\",\\n              \\\"extended_bounds\\\": {\\n                \\\"min\\\": {\\\"%timefilter%\\\": \\\"min\\\"},\\n                \\\"max\\\": {\\\"%timefilter%\\\": \\\"max\\\"}\\n              },\\n              \\\"min_doc_count\\\": 0\\n            },\\n            \\\"aggs\\\": {\\n              \\\"close\\\": {\\\"avg\\\": {\\\"field\\\": \\\"val_close\\\"}},\\n              \\\"high\\\": {\\\"max\\\": {\\\"field\\\": \\\"val_high\\\"}},\\n              \\\"low\\\": {\\\"min\\\": {\\\"field\\\": \\\"val_low\\\"}},\\n              \\\"tp\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\\"h\\\": \\\"high\\\", \\\"l\\\": \\\"low\\\", \\\"c\\\": \\\"close\\\"},\\n                  \\\"script\\\": \\\"if (params.h == null || params.l == null || params.c == null) return Double.NaN; return (params.h + params.l + params.c) / 3.0;\\\"\\n                }\\n              },\\n              \\\"atp\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"tp\\\",\\n                  \\\"window\\\": 14,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) return Double.NaN; double sum = 0.0; int count = 0; for (double v : values) { if (!Double.isNaN(v)) { sum += v; count++; } } return count == 14 ? sum / 14.0 : Double.NaN;\\\"\\n                }\\n              },\\n              \\\"dev\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\\"tp\\\": \\\"tp\\\", \\\"atp\\\": \\\"atp\\\"},\\n                  \\\"script\\\": \\\"if (params.tp == null || params.atp == null || Double.isNaN(params.tp) || Double.isNaN(params.atp)) return Double.NaN; return Math.abs(params.tp - params.atp);\\\"\\n                }\\n              },\\n              \\\"md\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"dev\\\",\\n                  \\\"window\\\": 14,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) return Double.NaN; double sum = 0.0; int count = 0; for (double v : values) { if (!Double.isNaN(v)) { sum += v; count++; } } return count == 14 ? sum / 14.0 : Double.NaN;\\\"\\n                }\\n              },\\n              \\\"cci\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\\"tp\\\": \\\"tp\\\", \\\"atp\\\": \\\"atp\\\", \\\"md\\\": \\\"md\\\"},\\n                  \\\"script\\\": \\\"if (params.tp == null || params.atp == null || params.md == null || Double.isNaN(params.tp) || Double.isNaN(params.atp) || Double.isNaN(params.md) || params.md == 0) return Double.NaN; return (params.tp - params.atp) / (0.015 * params.md);\\\"\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"size\\\": 0\\n      }\\n    },\\n    \\\"format\\\": {\\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"}\\n  },\\n  \\\"transform\\\": [\\n    {\\\"filter\\\": \\\"datum.cci != null && datum.cci.value != null\\\"},\\n    {\\\"fold\\\": [\\\"cci.value\\\"], \\\"as\\\": [\\\"series\\\", \\\"value\\\"]},\\n    {\\\"calculate\\\": \\\"'CCI'\\\", \\\"as\\\": \\\"series_name\\\"},\\n    {\\\"filter\\\": \\\"datum.value != null\\\"}\\n  ],\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\\"type\\\": \\\"line\\\", \\\"strokeWidth\\\": 2.5, \\\"interpolate\\\": \\\"monotone\\\"},\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\\"field\\\": \\\"key_as_string\\\", \\\"type\\\": \\\"temporal\\\", \\\"title\\\": null},\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"value\\\",\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"scale\\\": {\\\"domain\\\": [-400, 400]},\\n          \\\"title\\\": \\\"\\\"\\n        },\\n        \\\"color\\\": {\\\"value\\\": \\\"#FA7600\\\"}\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\\"type\\\": \\\"rule\\\", \\\"strokeDash\\\": [4,4], \\\"strokeWidth\\\": 1, \\\"color\\\": \\\"#FA7600\\\", \\\"opacity\\\": 0.5},\\n      \\\"encoding\\\": {\\\"y\\\": {\\\"datum\\\": 100}}\\n    },\\n    {\\n      \\\"mark\\\": {\\\"type\\\": \\\"text\\\", \\\"align\\\": \\\"left\\\", \\\"dx\\\": 0, \\\"dy\\\": -15, \\\"fontSize\\\": 16, \\\"color\\\": \\\"#FA7600\\\"},\\n      \\\"encoding\\\": {\\\"y\\\": {\\\"datum\\\": 100}, \\\"text\\\": {\\\"value\\\": \\\"Overbought (100)\\\"}}\\n    },\\n    {\\n      \\\"mark\\\": {\\\"type\\\": \\\"rule\\\", \\\"strokeDash\\\": [4,4], \\\"strokeWidth\\\": 1, \\\"color\\\": \\\"#FA7600\\\", \\\"opacity\\\": 0.5},\\n      \\\"encoding\\\": {\\\"y\\\": {\\\"datum\\\": -100}}\\n    },\\n    {\\n      \\\"mark\\\": {\\\"type\\\": \\\"text\\\", \\\"align\\\": \\\"left\\\", \\\"dx\\\": 0, \\\"dy\\\": 15, \\\"fontSize\\\": 16, \\\"color\\\": \\\"#FA7600\\\"},\\n      \\\"encoding\\\": {\\\"y\\\": {\\\"datum\\\": -100}, \\\"text\\\": {\\\"value\\\": \\\"Oversold (-100)\\\"}}\\n    },\\n    {\\n      \\\"mark\\\": {\\\"type\\\": \\\"rule\\\", \\\"strokeWidth\\\": 1, \\\"color\\\": \\\"#FA7600\\\", \\\"opacity\\\": 0.3},\\n      \\\"encoding\\\": {\\\"y\\\": {\\\"datum\\\": 0}}\\n    },\\n    {\\n      \\\"description\\\": \\\"Tooltip\\\",\\n      \\\"transform\\\": [{\\\"filter\\\": \\\"hover\\\"}, {\\\"pivot\\\": \\\"series_name\\\", \\\"value\\\": \\\"value\\\", \\\"groupby\\\": [\\\"key_as_string\\\"], \\\"limit\\\": 1, \\\"op\\\": \\\"mean\\\"}],\\n      \\\"params\\\": [{\\\"name\\\": \\\"hover\\\", \\\"select\\\": {\\\"type\\\": \\\"point\\\", \\\"encodings\\\": [\\\"x\\\"], \\\"nearest\\\": true, \\\"on\\\": \\\"pointerover\\\"}}],\\n      \\\"mark\\\": {\\\"type\\\": \\\"rule\\\", \\\"color\\\": \\\"black\\\", \\\"strokeOpacity\\\": 0.3, \\\"strokeWidth\\\": 1},\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\\"field\\\": \\\"key_as_string\\\", \\\"type\\\": \\\"temporal\\\"},\\n        \\\"opacity\\\": {\\\"condition\\\": {\\\"param\\\": \\\"hover\\\", \\\"empty\\\": false, \\\"value\\\": 1}, \\\"value\\\": 0},\\n        \\\"tooltip\\\": [\\n          {\\\"field\\\": \\\"key_as_string\\\", \\\"type\\\": \\\"temporal\\\", \\\"title\\\": \\\"Date\\\", \\\"timeUnit\\\": \\\"utcyearmonthdate\\\"},\\n          {\\\"field\\\": \\\"CCI\\\", \\\"type\\\": \\\"quantitative\\\", \\\"title\\\": \\\"CCI\\\", \\\"format\\\": \\\".2f\\\"}\\n        ]\\n      }\\n    }\\n  ]\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2025-11-19T13:52:50.043Z","id":"5a7c49b4-62dc-40fb-80f5-a9322105111f","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2025-11-23T08:57:34.036Z","updated_by":"u_mGBROF_q5bmFCATbLXAcCwKa0k8JvONAwSruelyKA5E_0","version":"WzMwMDIsNl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Stock Indicator OBV","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Stock Indicator OBV\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  'title': 'On Balance Volume',\\n  \\\"config\\\": {\\n    \\\"legend\\\": {\\n      \\\"symbolType\\\": \\\"stroke\\\",\\n      \\\"symbolStrokeWidth\\\": 4,\\n      \\\"symbolSize\\\": 200\\n    }\\n  },\\n  \\\"data\\\": {\\n    \\\"url\\\": {\\n      \\\"%context%\\\": true,\\n      \\\"%timefield%\\\": \\\"date_reference\\\",\\n      \\\"index\\\": \\\"quant-agents_stocks-eod_latest\\\",\\n      \\\"body\\\": {\\n        \\\"aggs\\\": {\\n          \\\"time_buckets\\\": {\\n            \\\"date_histogram\\\": {\\n              \\\"field\\\": \\\"date_reference\\\",\\n              \\\"calendar_interval\\\": \\\"1d\\\",\\n              \\\"extended_bounds\\\": {\\n                \\\"min\\\": {\\n                  \\\"%timefilter%\\\": \\\"min\\\"\\n                },\\n                \\\"max\\\": {\\n                  \\\"%timefilter%\\\": \\\"max\\\"\\n                }\\n              },\\n              \\\"min_doc_count\\\": 0\\n            },\\n            \\\"aggs\\\": {\\n              \\\"close\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_close\\\"\\n                }\\n              },\\n              \\\"volume\\\": {\\n                \\\"sum\\\": {\\n                  \\\"field\\\": \\\"val_volume\\\"\\n                }\\n              },\\n              \\\"prev_close\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"close\\\",\\n                  \\\"window\\\": 2,\\n                  \\\"script\\\": \\\"values.length < 2 ? Double.NaN : values[0]\\\"\\n                }\\n              },\\n              \\\"signed_volume\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"close\\\": \\\"close\\\",\\n                    \\\"prev\\\": \\\"prev_close\\\",\\n                    \\\"vol\\\": \\\"volume\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.close == null || params.vol == null) return Double.NaN; if (params.prev == null) return params.vol; if (params.close > params.prev) return params.vol; else if (params.close < params.prev) return -params.vol; else return 0.0;\\\"\\n                }\\n              },\\n              \\\"obv\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"signed_volume\\\",\\n                  \\\"window\\\": 10000,\\n                  \\\"script\\\": \\\"double sum = 0.0; for (double v : values) { if (!Double.isNaN(v)) sum += v; } return sum;\\\"\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"size\\\": 0\\n      }\\n    },\\n    \\\"format\\\": {\\n      \\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"\\n    }\\n  },\\n  \\\"transform\\\": [\\n    {\\n      \\\"filter\\\": \\\"datum.obv != null && datum.obv.value != null\\\"\\n    },\\n    {\\n      \\\"fold\\\": [\\n        \\\"obv.value\\\"\\n      ],\\n      \\\"as\\\": [\\n        \\\"series\\\",\\n        \\\"value\\\"\\n      ]\\n    },\\n    {\\n      \\\"calculate\\\": \\\"'OBV'\\\",\\n      \\\"as\\\": \\\"series_name\\\"\\n    },\\n    {\\n      \\\"filter\\\": \\\"datum.value != null\\\"\\n    }\\n  ],\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"line\\\",\\n        \\\"strokeWidth\\\": 2.5,\\n        \\\"interpolate\\\": \\\"monotone\\\"\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\",\\n          \\\"title\\\": null\\n        },\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"value\\\",\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"scale\\\": {\\n            \\\"zero\\\": false\\n          },\\n          \\\"title\\\": \\\"\\\"\\n        },\\n        \\\"color\\\": {\\n          \\\"value\\\": \\\"#680EE0\\\"\\n        }\\n      }\\n    },\\n    {\\n      \\\"description\\\": \\\"Tooltip\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"filter\\\": \\\"hover\\\"\\n        },\\n        {\\n          \\\"pivot\\\": \\\"series_name\\\",\\n          \\\"value\\\": \\\"value\\\",\\n          \\\"groupby\\\": [\\n            \\\"key_as_string\\\"\\n          ],\\n          \\\"limit\\\": 1,\\n          \\\"op\\\": \\\"mean\\\"\\n        }\\n      ],\\n      \\\"params\\\": [\\n        {\\n          \\\"name\\\": \\\"hover\\\",\\n          \\\"select\\\": {\\n            \\\"type\\\": \\\"point\\\",\\n            \\\"encodings\\\": [\\n              \\\"x\\\"\\n            ],\\n            \\\"nearest\\\": true,\\n            \\\"on\\\": \\\"pointerover\\\"\\n          }\\n        }\\n      ],\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"color\\\": \\\"black\\\",\\n        \\\"strokeOpacity\\\": 0.3,\\n        \\\"strokeWidth\\\": 1\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\"\\n        },\\n        \\\"opacity\\\": {\\n          \\\"condition\\\": {\\n            \\\"param\\\": \\\"hover\\\",\\n            \\\"empty\\\": false,\\n            \\\"value\\\": 1\\n          },\\n          \\\"value\\\": 0\\n        },\\n        \\\"tooltip\\\": [\\n          {\\n            \\\"field\\\": \\\"key_as_string\\\",\\n            \\\"type\\\": \\\"temporal\\\",\\n            \\\"title\\\": \\\"Date\\\",\\n            \\\"timeUnit\\\": \\\"utcyearmonthdate\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"OBV\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"OBV\\\",\\n            \\\"format\\\": \\\",.0f\\\"\\n          }\\n        ]\\n      }\\n    }\\n  ],\\n  \\\"encoding\\\": {\\n    \\\"color\\\": {\\n      \\\"field\\\": \\\"series_name\\\",\\n      \\\"type\\\": \\\"nominal\\\",\\n      \\\"scale\\\": {\\n        \\\"domain\\\": [\\n          \\\"OBV\\\"\\n        ],\\n        \\\"range\\\": [\\n          \\\"#680EE0\\\"\\n        ]\\n      },\\n      \\\"legend\\\": {\\n        \\\"title\\\": null,\\n        \\\"orient\\\": \\\"none\\\",\\n        \\\"direction\\\": \\\"vertical\\\",\\n        \\\"legendX\\\": 15,\\n        \\\"legendY\\\": 15,\\n        \\\"offset\\\": 0,\\n        \\\"labelFontSize\\\": 12,\\n        \\\"symbolSize\\\": 150,\\n        \\\"padding\\\": 8\\n      }\\n    }\\n  }\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2025-11-19T13:52:50.043Z","id":"7ca0f420-d368-4051-b858-8fc24ec35e51","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2025-11-23T09:00:07.312Z","updated_by":"u_mGBROF_q5bmFCATbLXAcCwKa0k8JvONAwSruelyKA5E_0","version":"WzMwMDgsNl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Stock Indicator MACD","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Stock Indicator MACD\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  \\\"title\\\": \\\"Moving Average Convergence/Divergence\\\"\\n  \\\"config\\\": {\\n    \\\"legend\\\": {\\n      \\\"symbolType\\\": \\\"stroke\\\",\\n      \\\"symbolStrokeWidth\\\": 4,\\n      \\\"symbolSize\\\": 200\\n    }\\n  },\\n  \\\"data\\\": {\\n    \\\"url\\\": {\\n      \\\"%context%\\\": true,\\n      \\\"%timefield%\\\": \\\"date_reference\\\",\\n      \\\"index\\\": \\\"quant-agents_stocks-eod_latest\\\",\\n      \\\"body\\\": {\\n        \\\"aggs\\\": {\\n          \\\"time_buckets\\\": {\\n            \\\"date_histogram\\\": {\\n              \\\"field\\\": \\\"date_reference\\\",\\n              \\\"calendar_interval\\\": \\\"1d\\\",\\n              \\\"extended_bounds\\\": {\\n                \\\"min\\\": {\\n                  \\\"%timefilter%\\\": \\\"min\\\"\\n                },\\n                \\\"max\\\": {\\n                  \\\"%timefilter%\\\": \\\"max\\\"\\n                }\\n              },\\n              \\\"min_doc_count\\\": 0\\n            },\\n            \\\"aggs\\\": {\\n              \\\"close\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_close\\\"\\n                }\\n              },\\n              \\\"short_ema\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"close\\\",\\n                  \\\"window\\\": 1000,\\n                  \\\"script\\\": \\\"double alpha = 2.0 / (7 + 1); double ema = Double.NaN; for (double v : values) { if (!Double.isNaN(v)) { if (Double.isNaN(ema)) ema = v; else ema = alpha * v + (1 - alpha) * ema; } } return ema;\\\"\\n                }\\n              },\\n              \\\"long_ema\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"close\\\",\\n                  \\\"window\\\": 1000,\\n                  \\\"script\\\": \\\"double alpha = 2.0 / (20 + 1); double ema = Double.NaN; for (double v : values) { if (!Double.isNaN(v)) { if (Double.isNaN(ema)) ema = v; else ema = alpha * v + (1 - alpha) * ema; } } return ema;\\\"\\n                }\\n              },\\n              \\\"macd\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"s\\\": \\\"short_ema\\\",\\n                    \\\"l\\\": \\\"long_ema\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.s == null || params.l == null) return Double.NaN; return params.s - params.l;\\\"\\n                }\\n              },\\n              \\\"signal\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"macd\\\",\\n                  \\\"window\\\": 1000,\\n                  \\\"script\\\": \\\"double alpha = 2.0 / (6 + 1); double ema = Double.NaN; for (double v : values) { if (!Double.isNaN(v)) { if (Double.isNaN(ema)) ema = v; else ema = alpha * v + (1 - alpha) * ema; } } return ema;\\\"\\n                }\\n              },\\n              \\\"histogram\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"m\\\": \\\"macd\\\",\\n                    \\\"s\\\": \\\"signal\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.m == null || params.s == null) return Double.NaN; return params.m - params.s;\\\"\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"size\\\": 0\\n      }\\n    },\\n    \\\"format\\\": {\\n      \\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"\\n    }\\n  },\\n  \\\"transform\\\": [\\n    {\\n      \\\"filter\\\": \\\"datum.macd != null && datum.signal != null && datum.histogram != null\\\"\\n    },\\n    {\\n      \\\"fold\\\": [\\n        \\\"macd.value\\\",\\n        \\\"signal.value\\\",\\n        \\\"histogram.value\\\"\\n      ],\\n      \\\"as\\\": [\\n        \\\"series\\\",\\n        \\\"value\\\"\\n      ]\\n    },\\n    {\\n      \\\"calculate\\\": \\\"datum.series === 'macd.value' ? 'MACD' : datum.series === 'signal.value' ? 'Signal' : 'Histogram'\\\",\\n      \\\"as\\\": \\\"series_name\\\"\\n    },\\n    {\\n      \\\"filter\\\": \\\"datum.value != null\\\"\\n    }\\n  ],\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"line\\\",\\n        \\\"strokeWidth\\\": 3,\\n        \\\"interpolate\\\": \\\"monotone\\\"\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\",\\n          \\\"title\\\": null\\n        },\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"value\\\",\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"scale\\\": {\\n            \\\"zero\\\": true\\n          },\\n          \\\"title\\\": \\\"\\\"\\n        },\\n        \\\"color\\\": {\\n          \\\"field\\\": \\\"series_name\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [\\n              \\\"MACD\\\",\\n              \\\"Signal\\\",\\n              \\\"Histogram\\\"\\n            ],\\n            \\\"range\\\": [\\n              \\\"#61A2FF\\\",\\n              \\\"#F07680\\\",\\n              \\\"#EAAE01\\\"\\n            ]\\n          }\\n        }\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"bar\\\",\\n        \\\"width\\\": 4,\\n        \\\"opacity\\\": 0.7\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\"\\n        },\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"value\\\",\\n          \\\"type\\\": \\\"quantitative\\\"\\n        },\\n        \\\"color\\\": {\\n          \\\"condition\\\": [\\n            {\\n              \\\"test\\\": \\\"datum.value > 0\\\",\\n              \\\"value\\\": \\\"#61A2FF\\\"\\n            },\\n            {\\n              \\\"test\\\": \\\"datum.value < 0\\\",\\n              \\\"value\\\": \\\"#F07680\\\"\\n            }\\n          ],\\n          \\\"value\\\": \\\"#EAAE01\\\"\\n        }\\n      },\\n      \\\"transform\\\": [\\n        {\\n          \\\"filter\\\": \\\"datum.series_name === 'Histogram'\\\"\\n        }\\n      ]\\n    },\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"strokeWidth\\\": 1,\\n        \\\"color\\\": \\\"#777777\\\",\\n        \\\"opacity\\\": 0.5\\n      },\\n      \\\"encoding\\\": {\\n        \\\"y\\\": {\\n          \\\"datum\\\": 0\\n        }\\n      }\\n    },\\n    {\\n      \\\"description\\\": \\\"Tooltip\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"filter\\\": \\\"hover\\\"\\n        },\\n        {\\n          \\\"pivot\\\": \\\"series_name\\\",\\n          \\\"value\\\": \\\"value\\\",\\n          \\\"groupby\\\": [\\n            \\\"key_as_string\\\"\\n          ]\\n        }\\n      ],\\n      \\\"params\\\": [\\n        {\\n          \\\"name\\\": \\\"hover\\\",\\n          \\\"select\\\": {\\n            \\\"type\\\": \\\"point\\\",\\n            \\\"encodings\\\": [\\n              \\\"x\\\"\\n            ],\\n            \\\"nearest\\\": true,\\n            \\\"on\\\": \\\"pointerover\\\"\\n          }\\n        }\\n      ],\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"color\\\": \\\"black\\\",\\n        \\\"strokeOpacity\\\": 0.3,\\n        \\\"strokeWidth\\\": 1\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\"\\n        },\\n        \\\"opacity\\\": {\\n          \\\"condition\\\": {\\n            \\\"param\\\": \\\"hover\\\",\\n            \\\"empty\\\": false,\\n            \\\"value\\\": 1\\n          },\\n          \\\"value\\\": 0\\n        },\\n        \\\"tooltip\\\": [\\n          {\\n            \\\"field\\\": \\\"key_as_string\\\",\\n            \\\"type\\\": \\\"temporal\\\",\\n            \\\"title\\\": \\\"Date\\\",\\n            \\\"timeUnit\\\": \\\"utcyearmonthdate\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"MACD\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"MACD\\\",\\n            \\\"format\\\": \\\".4f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"Signal\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Signal\\\",\\n            \\\"format\\\": \\\".4f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"Histogram\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Histogram\\\",\\n            \\\"format\\\": \\\".4f\\\"\\n          }\\n        ]\\n      }\\n    }\\n  ],\\n  \\\"encoding\\\": {\\n    \\\"color\\\": {\\n      \\\"field\\\": \\\"series_name\\\",\\n      \\\"type\\\": \\\"nominal\\\",\\n      \\\"scale\\\": {\\n        \\\"domain\\\": [\\n          \\\"MACD\\\",\\n          \\\"Signal\\\",\\n          \\\"Histogram\\\"\\n        ],\\n        \\\"range\\\": [\\n          \\\"#61A2FF\\\",\\n          \\\"#F07680\\\",\\n          \\\"#EAAE01\\\"\\n        ]\\n      },\\n      \\\"legend\\\": {\\n        \\\"title\\\": null,\\n        \\\"orient\\\": \\\"none\\\",\\n        \\\"direction\\\": \\\"vertical\\\",\\n        \\\"legendX\\\": 15,\\n        \\\"legendY\\\": 15,\\n        \\\"offset\\\": 0,\\n        \\\"labelFontSize\\\": 12,\\n        \\\"symbolSize\\\": 150,\\n        \\\"padding\\\": 8\\n      }\\n    }\\n  }\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2025-11-19T13:52:50.043Z","id":"f055131b-a3a3-485c-9d6e-94f15d1dc65b","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2025-11-23T09:00:21.518Z","updated_by":"u_mGBROF_q5bmFCATbLXAcCwKa0k8JvONAwSruelyKA5E_0","version":"WzMwMTAsNl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Stock Indicator ADX","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Stock Indicator ADX\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  'title':'Average Directional Movement Index',\\n  \\\"config\\\": {\\n    \\\"legend\\\": {\\n      \\\"symbolType\\\": \\\"stroke\\\",\\n      \\\"symbolStrokeWidth\\\": 4,\\n      \\\"symbolSize\\\": 200\\n    }\\n  },\\n  \\\"data\\\": {\\n    \\\"url\\\": {\\n      \\\"%context%\\\": true,\\n      \\\"%timefield%\\\": \\\"date_reference\\\",\\n      \\\"index\\\": \\\"quant-agents_stocks-eod_latest\\\",\\n      \\\"body\\\": {\\n        \\\"aggs\\\": {\\n          \\\"time_buckets\\\": {\\n            \\\"date_histogram\\\": {\\n              \\\"field\\\": \\\"date_reference\\\",\\n              \\\"calendar_interval\\\": \\\"1d\\\",\\n              \\\"extended_bounds\\\": {\\n                \\\"min\\\": {\\n                  \\\"%timefilter%\\\": \\\"min\\\"\\n                },\\n                \\\"max\\\": {\\n                  \\\"%timefilter%\\\": \\\"max\\\"\\n                }\\n              },\\n              \\\"min_doc_count\\\": 0\\n            },\\n            \\\"aggs\\\": {\\n              \\\"close\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_close\\\"\\n                }\\n              },\\n              \\\"high\\\": {\\n                \\\"max\\\": {\\n                  \\\"field\\\": \\\"val_high\\\"\\n                }\\n              },\\n              \\\"low\\\": {\\n                \\\"min\\\": {\\n                  \\\"field\\\": \\\"val_low\\\"\\n                }\\n              },\\n              \\\"prev_high\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"high\\\",\\n                  \\\"window\\\": 2,\\n                  \\\"script\\\": \\\"values.length < 2 ? Double.NaN : values[0]\\\"\\n                }\\n              },\\n              \\\"prev_low\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"low\\\",\\n                  \\\"window\\\": 2,\\n                  \\\"script\\\": \\\"values.length < 2 ? Double.NaN : values[0]\\\"\\n                }\\n              },\\n              \\\"prev_close\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"close\\\",\\n                  \\\"window\\\": 2,\\n                  \\\"script\\\": \\\"values.length < 2 ? Double.NaN : values[0]\\\"\\n                }\\n              },\\n              \\\"plus_dm\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"h\\\": \\\"high\\\",\\n                    \\\"ph\\\": \\\"prev_high\\\",\\n                    \\\"l\\\": \\\"low\\\",\\n                    \\\"pl\\\": \\\"prev_low\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.h==null || params.ph==null || params.l==null || params.pl==null) return Double.NaN; double up = params.h - params.ph; double down = params.pl - params.l; return (up > down && up > 0) ? up : 0.0;\\\"\\n                }\\n              },\\n              \\\"minus_dm\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"h\\\": \\\"high\\\",\\n                    \\\"ph\\\": \\\"prev_high\\\",\\n                    \\\"l\\\": \\\"low\\\",\\n                    \\\"pl\\\": \\\"prev_low\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.h==null || params.ph==null || params.l==null || params.pl==null) return Double.NaN; double up = params.h - params.ph; double down = params.pl - params.l; return (down > up && down > 0) ? down : 0.0;\\\"\\n                }\\n              },\\n              \\\"tr\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"h\\\": \\\"high\\\",\\n                    \\\"l\\\": \\\"low\\\",\\n                    \\\"pc\\\": \\\"prev_close\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.h==null || params.l==null || params.pc==null) return Double.NaN; double hl = params.h - params.l; double hc = Math.abs(params.h - params.pc); double lc = Math.abs(params.l - params.pc); return Math.max(hl, Math.max(hc, lc));\\\"\\n                }\\n              },\\n              \\\"sm_plus_dm\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"plus_dm\\\",\\n                  \\\"window\\\": 1000,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) return Double.NaN; double alpha = 1.0 / 14; double smoothed = Double.NaN; for (double v : values) { if (!Double.isNaN(v)) { if (Double.isNaN(smoothed)) { smoothed = v; } else { smoothed = alpha * v + (1 - alpha) * smoothed; } } } return smoothed;\\\"\\n                }\\n              },\\n              \\\"sm_minus_dm\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"minus_dm\\\",\\n                  \\\"window\\\": 1000,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) return Double.NaN; double alpha = 1.0 / 14; double smoothed = Double.NaN; for (double v : values) { if (!Double.isNaN(v)) { if (Double.isNaN(smoothed)) { smoothed = v; } else { smoothed = alpha * v + (1 - alpha) * smoothed; } } } return smoothed;\\\"\\n                }\\n              },\\n              \\\"atr\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"tr\\\",\\n                  \\\"window\\\": 1000,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) return Double.NaN; double alpha = 1.0 / 14; double smoothed = Double.NaN; for (double v : values) { if (!Double.isNaN(v)) { if (Double.isNaN(smoothed)) { smoothed = v; } else { smoothed = alpha * v + (1 - alpha) * smoothed; } } } return smoothed;\\\"\\n                }\\n              },\\n              \\\"plus_di\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"sm\\\": \\\"sm_plus_dm\\\",\\n                    \\\"atr\\\": \\\"atr\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.sm == null || params.atr == null || params.atr <= 0) return Double.NaN; return 100.0 * params.sm / params.atr;\\\"\\n                }\\n              },\\n              \\\"minus_di\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"sm\\\": \\\"sm_minus_dm\\\",\\n                    \\\"atr\\\": \\\"atr\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.sm == null || params.atr == null || params.atr <= 0) return Double.NaN; return 100.0 * params.sm / params.atr;\\\"\\n                }\\n              },\\n              \\\"dx\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"p\\\": \\\"plus_di\\\",\\n                    \\\"m\\\": \\\"minus_di\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.p == null || params.m == null) return Double.NaN; double sum = params.p + params.m; return sum <= 0 ? Double.NaN : 100.0 * Math.abs(params.p - params.m) / sum;\\\"\\n                }\\n              },\\n              \\\"adx\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"dx\\\",\\n                  \\\"window\\\": 1000,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) return Double.NaN; double alpha = 1.0 / 14; double smoothed = Double.NaN; for (double v : values) { if (!Double.isNaN(v)) { if (Double.isNaN(smoothed)) { smoothed = v; } else { smoothed = alpha * v + (1 - alpha) * smoothed; } } } return smoothed;\\\"\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"size\\\": 0\\n      }\\n    },\\n    \\\"format\\\": {\\n      \\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"\\n    }\\n  },\\n  \\\"transform\\\": [\\n    {\\n      \\\"filter\\\": \\\"datum.adx != null && datum.adx.value != null\\\"\\n    },\\n    {\\n      \\\"fold\\\": [\\n        \\\"adx.value\\\"\\n      ],\\n      \\\"as\\\": [\\n        \\\"series\\\",\\n        \\\"value\\\"\\n      ]\\n    },\\n    {\\n      \\\"calculate\\\": \\\"'ADX'\\\",\\n      \\\"as\\\": \\\"series_name\\\"\\n    },\\n    {\\n      \\\"filter\\\": \\\"datum.value != null\\\"\\n    }\\n  ],\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"line\\\",\\n        \\\"strokeWidth\\\": 2.5,\\n        \\\"interpolate\\\": \\\"monotone\\\"\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\",\\n          \\\"title\\\": null\\n        },\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"value\\\",\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [\\n              0,\\n              100\\n            ]\\n          },\\n          \\\"title\\\": \\\"\\\"\\n        },\\n        \\\"color\\\": {\\n          \\\"value\\\": \\\"#9467BD\\\"\\n        }\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"strokeDash\\\": [\\n          4,\\n          4\\n        ],\\n        \\\"strokeWidth\\\": 1,\\n        \\\"color\\\": \\\"#777777\\\",\\n        \\\"opacity\\\": 0.5\\n      },\\n      \\\"encoding\\\": {\\n        \\\"y\\\": {\\n          \\\"datum\\\": 25\\n        }\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"text\\\",\\n        \\\"align\\\": \\\"left\\\",\\n        \\\"dx\\\": 0,\\n        \\\"dy\\\": -15,\\n        \\\"fontSize\\\": 16,\\n        \\\"color\\\": \\\"#777\\\"\\n      },\\n      \\\"encoding\\\": {\\n        \\\"y\\\": {\\n          \\\"datum\\\": 25\\n        },\\n        \\\"text\\\": {\\n          \\\"value\\\": \\\"Strong Trend (25)\\\"\\n        }\\n      }\\n    },\\n    {\\n      \\\"description\\\": \\\"Tooltip\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"filter\\\": \\\"hover\\\"\\n        },\\n        {\\n          \\\"pivot\\\": \\\"series_name\\\",\\n          \\\"value\\\": \\\"value\\\",\\n          \\\"groupby\\\": [\\n            \\\"key_as_string\\\"\\n          ],\\n          \\\"limit\\\": 1,\\n          \\\"op\\\": \\\"mean\\\"\\n        }\\n      ],\\n      \\\"params\\\": [\\n        {\\n          \\\"name\\\": \\\"hover\\\",\\n          \\\"select\\\": {\\n            \\\"type\\\": \\\"point\\\",\\n            \\\"encodings\\\": [\\n              \\\"x\\\"\\n            ],\\n            \\\"nearest\\\": true,\\n            \\\"on\\\": \\\"pointerover\\\"\\n          }\\n        }\\n      ],\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"color\\\": \\\"black\\\",\\n        \\\"strokeOpacity\\\": 0.3,\\n        \\\"strokeWidth\\\": 1\\n      },\\n      \\\"encoding\\\": {\\n        \\\"color\\\": {\\n          \\\"field\\\": \\\"series_name\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [\\n              \\\"ADX\\\"\\n            ],\\n            \\\"range\\\": [\\n              \\\"#9467BD\\\"\\n            ]\\n          },\\n          \\\"legend\\\": {\\n            \\\"title\\\": null,\\n            \\\"orient\\\": \\\"none\\\",\\n            \\\"direction\\\": \\\"vertical\\\",\\n            \\\"legendX\\\": 15,\\n            \\\"legendY\\\": 15,\\n            \\\"offset\\\": 0,\\n            \\\"labelFontSize\\\": 12,\\n            \\\"symbolSize\\\": 150,\\n            \\\"padding\\\": 8\\n          }\\n        },\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\"\\n        },\\n        \\\"opacity\\\": {\\n          \\\"condition\\\": {\\n            \\\"param\\\": \\\"hover\\\",\\n            \\\"empty\\\": false,\\n            \\\"value\\\": 1\\n          },\\n          \\\"value\\\": 0\\n        },\\n        \\\"tooltip\\\": [\\n          {\\n            \\\"field\\\": \\\"key_as_string\\\",\\n            \\\"type\\\": \\\"temporal\\\",\\n            \\\"title\\\": \\\"Date\\\",\\n            \\\"timeUnit\\\": \\\"utcyearmonthdate\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"ADX\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"ADX\\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          }\\n        ]\\n      }\\n    }\\n  ]\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2025-11-19T13:52:50.043Z","id":"abd9fb7e-5d6b-4b76-a150-26b66653c8c6","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2025-11-23T09:00:51.034Z","updated_by":"u_mGBROF_q5bmFCATbLXAcCwKa0k8JvONAwSruelyKA5E_0","version":"WzMwMTIsNl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Stock Indicator STOCH","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Stock Indicator STOCH\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  'title': 'Stochastic Oscillator',\\n  \\\"config\\\": {\\n    \\\"legend\\\": {\\n      \\\"symbolType\\\": \\\"stroke\\\",\\n      \\\"symbolStrokeWidth\\\": 4,\\n      \\\"symbolSize\\\": 200\\n    }\\n  },\\n  \\\"data\\\": {\\n    \\\"url\\\": {\\n      \\\"%context%\\\": true,\\n      \\\"%timefield%\\\": \\\"date_reference\\\",\\n      \\\"index\\\": \\\"quant-agents_stocks-eod_latest\\\",\\n      \\\"body\\\": {\\n        \\\"aggs\\\": {\\n          \\\"time_buckets\\\": {\\n            \\\"date_histogram\\\": {\\n              \\\"field\\\": \\\"date_reference\\\",\\n              \\\"calendar_interval\\\": \\\"1d\\\",\\n              \\\"extended_bounds\\\": {\\n                \\\"min\\\": {\\\"%timefilter%\\\": \\\"min\\\"},\\n                \\\"max\\\": {\\\"%timefilter%\\\": \\\"max\\\"}\\n              },\\n              \\\"min_doc_count\\\": 0\\n            },\\n            \\\"aggs\\\": {\\n              \\\"close\\\": {\\\"avg\\\": {\\\"field\\\": \\\"val_close\\\"}},\\n              \\\"high\\\": {\\\"max\\\": {\\\"field\\\": \\\"val_high\\\"}},\\n              \\\"low\\\": {\\\"min\\\": {\\\"field\\\": \\\"val_low\\\"}},\\n              \\\"highest_high\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"high\\\",\\n                  \\\"window\\\": 14,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) { return Double.NaN; } double max = Double.NEGATIVE_INFINITY; int count = 0; for (double v : values) { if (!Double.isNaN(v)) { if (v > max) max = v; count++; } } return count < 14 ? Double.NaN : max;\\\"\\n                }\\n              },\\n              \\\"lowest_low\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"low\\\",\\n                  \\\"window\\\": 14,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) { return Double.NaN; } double min = Double.POSITIVE_INFINITY; int count = 0; for (double v : values) { if (!Double.isNaN(v)) { if (v < min) min = v; count++; } } return count < 14 ? Double.NaN : min;\\\"\\n                }\\n              },\\n              \\\"raw_k\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\\"close\\\": \\\"close\\\", \\\"hh\\\": \\\"highest_high\\\", \\\"ll\\\": \\\"lowest_low\\\"},\\n                  \\\"script\\\": \\\"if (params.close == null || params.hh == null || params.ll == null || Double.isNaN(params.close) || Double.isNaN(params.hh) || Double.isNaN(params.ll)) return Double.NaN; double range = params.hh - params.ll; if (range <= 0) return Double.NaN; double k = 100.0 * (params.close - params.ll) / range; return (k < 0 || k > 100) ? Double.NaN : k;\\\"\\n                }\\n              },\\n              \\\"fast_d\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"raw_k\\\",\\n                  \\\"window\\\": 3,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) return Double.NaN; double sum = 0; int count = 0; for (double v : values) { if (!Double.isNaN(v)) { sum += v; count++; } } return count < 3 ? Double.NaN : sum / count;\\\"\\n                }\\n              },\\n              \\\"slow_d\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"fast_d\\\",\\n                  \\\"window\\\": 3,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) return Double.NaN; double sum = 0; int count = 0; for (double v : values) { if (!Double.isNaN(v)) { sum += v; count++; } } return count < 3 ? Double.NaN : sum / count;\\\"\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"size\\\": 0\\n      }\\n    },\\n    \\\"format\\\": {\\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"}\\n  },\\n  \\\"transform\\\": [\\n    {\\\"filter\\\": \\\"datum.fast_d != null && datum.fast_d.value != null && datum.slow_d != null && datum.slow_d.value != null\\\"},\\n    {\\\"fold\\\": [\\\"fast_d.value\\\", \\\"slow_d.value\\\"], \\\"as\\\": [\\\"series\\\", \\\"value\\\"]},\\n    {\\\"calculate\\\": \\\"datum.series === 'fast_d.value' ? 'Fast %D' : 'Slow %D'\\\", \\\"as\\\": \\\"series_name\\\"},\\n    {\\\"filter\\\": \\\"datum.value != null\\\"}\\n  ],\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\\"type\\\": \\\"line\\\", \\\"strokeWidth\\\": 2, \\\"interpolate\\\": \\\"monotone\\\"},\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\\"field\\\": \\\"key_as_string\\\", \\\"type\\\": \\\"temporal\\\", \\\"title\\\": null},\\n        \\\"y\\\": {\\\"field\\\": \\\"value\\\", \\\"type\\\": \\\"quantitative\\\", \\\"scale\\\": {\\\"domain\\\": [0, 100]}, \\\"title\\\": \\\"\\\"},\\n        \\\"color\\\": {\\n          \\\"field\\\": \\\"series_name\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [\\\"Fast %D\\\", \\\"Slow %D\\\"],\\n            \\\"range\\\": [\\\"#F07680\\\", \\\"#61A2FF\\\"]\\n          }\\n        }\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\\"type\\\": \\\"rule\\\", \\\"strokeDash\\\": [4,4], \\\"strokeWidth\\\": 1, \\\"color\\\": \\\"#777777\\\", \\\"opacity\\\": 0.5},\\n      \\\"encoding\\\": {\\\"y\\\": {\\\"datum\\\": 75}}\\n    },\\n    {\\n      \\\"mark\\\": {\\\"type\\\": \\\"text\\\", \\\"align\\\": \\\"left\\\", \\\"dx\\\": 0, \\\"dy\\\": -15, \\\"fontSize\\\": 16, \\\"color\\\": \\\"#777\\\"},\\n      \\\"encoding\\\": {\\\"y\\\": {\\\"datum\\\": 75}, \\\"text\\\": {\\\"value\\\": \\\"Overbought (75)\\\"}}\\n    },\\n    {\\n      \\\"mark\\\": {\\\"type\\\": \\\"rule\\\", \\\"strokeDash\\\": [4,4], \\\"strokeWidth\\\": 1, \\\"color\\\": \\\"#777777\\\", \\\"opacity\\\": 0.5},\\n      \\\"encoding\\\": {\\\"y\\\": {\\\"datum\\\": 25}}\\n    },\\n    {\\n      \\\"mark\\\": {\\\"type\\\": \\\"text\\\", \\\"align\\\": \\\"left\\\", \\\"dx\\\": 0, \\\"dy\\\": 15, \\\"fontSize\\\": 16, \\\"color\\\": \\\"#777\\\"},\\n      \\\"encoding\\\": {\\\"y\\\": {\\\"datum\\\": 25}, \\\"text\\\": {\\\"value\\\": \\\"Oversold (25)\\\"}}\\n    },\\n    {\\n      \\\"description\\\": \\\"Tooltip\\\",\\n      \\\"transform\\\": [{\\\"filter\\\": \\\"hover\\\"}, {\\\"pivot\\\": \\\"series_name\\\", \\\"value\\\": \\\"value\\\", \\\"groupby\\\": [\\\"key_as_string\\\"], \\\"limit\\\": 2, \\\"op\\\": \\\"mean\\\"}],\\n      \\\"params\\\": [{\\\"name\\\": \\\"hover\\\", \\\"select\\\": {\\\"type\\\": \\\"point\\\", \\\"encodings\\\": [\\\"x\\\"], \\\"nearest\\\": true, \\\"on\\\": \\\"pointerover\\\"}}],\\n      \\\"mark\\\": {\\\"type\\\": \\\"rule\\\", \\\"color\\\": \\\"black\\\", \\\"strokeOpacity\\\": 0.3, \\\"strokeWidth\\\": 1},\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\\"field\\\": \\\"key_as_string\\\", \\\"type\\\": \\\"temporal\\\"},\\n        \\\"opacity\\\": {\\\"condition\\\": {\\\"param\\\": \\\"hover\\\", \\\"empty\\\": false, \\\"value\\\": 1}, \\\"value\\\": 0},\\n        \\\"tooltip\\\": [\\n          {\\\"field\\\": \\\"key_as_string\\\", \\\"type\\\": \\\"temporal\\\", \\\"title\\\": \\\"Date\\\", \\\"timeUnit\\\": \\\"utcyearmonthdate\\\"},\\n          {\\\"field\\\": \\\"Fast %D\\\", \\\"type\\\": \\\"quantitative\\\", \\\"title\\\": \\\"Fast %D\\\", \\\"format\\\": \\\".2f\\\"},\\n          {\\\"field\\\": \\\"Slow %D\\\", \\\"type\\\": \\\"quantitative\\\", \\\"title\\\": \\\"Slow %D\\\", \\\"format\\\": \\\".2f\\\"}\\n        ]\\n      }\\n    }\\n  ],\\n  \\\"encoding\\\": {\\n    \\\"color\\\": {\\n      \\\"field\\\": \\\"series_name\\\",\\n      \\\"type\\\": \\\"nominal\\\",\\n      \\\"scale\\\": {\\n        \\\"domain\\\": [\\\"Fast %D\\\", \\\"Slow %D\\\"],\\n        \\\"range\\\": [\\\"#F07680\\\", \\\"#61A2FF\\\"]\\n      },\\n      \\\"legend\\\": {\\n        \\\"title\\\": null,\\n        \\\"orient\\\": \\\"none\\\",\\n        \\\"direction\\\": \\\"vertical\\\",\\n        \\\"legendX\\\": 15,\\n        \\\"legendY\\\": 15,\\n        \\\"offset\\\": 0,\\n        \\\"labelFontSize\\\": 12,\\n        \\\"symbolSize\\\": 150,\\n        \\\"padding\\\": 8\\n      }\\n    }\\n  }\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2025-11-19T13:52:50.043Z","id":"321ab849-dae5-419d-a71f-07a1106a5f26","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2025-11-23T09:01:15.749Z","updated_by":"u_mGBROF_q5bmFCATbLXAcCwKa0k8JvONAwSruelyKA5E_0","version":"WzMwMTMsNl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Stock Indicator RSI","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Stock Indicator RSI\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  'title':'Relative Strength Index',\\n  \\\"config\\\": {\\n    \\\"legend\\\": {\\n      \\\"symbolType\\\": \\\"stroke\\\",\\n      \\\"symbolStrokeWidth\\\": 4,\\n      \\\"symbolSize\\\": 200\\n    }\\n  },\\n  \\\"data\\\": {\\n    \\\"url\\\": {\\n      \\\"%context%\\\": true,\\n      \\\"%timefield%\\\": \\\"date_reference\\\",\\n      \\\"index\\\": \\\"quant-agents_stocks-eod_latest\\\",\\n      \\\"body\\\": {\\n        \\\"aggs\\\": {\\n          \\\"time_buckets\\\": {\\n            \\\"date_histogram\\\": {\\n              \\\"field\\\": \\\"date_reference\\\",\\n              \\\"calendar_interval\\\": \\\"1d\\\",\\n              \\\"extended_bounds\\\": {\\n                \\\"min\\\": {\\n                  \\\"%timefilter%\\\": \\\"min\\\"\\n                },\\n                \\\"max\\\": {\\n                  \\\"%timefilter%\\\": \\\"max\\\"\\n                }\\n              },\\n              \\\"min_doc_count\\\": 0\\n            },\\n            \\\"aggs\\\": {\\n              \\\"close\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_close\\\"\\n                }\\n              },\\n              \\\"change\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"close\\\",\\n                  \\\"window\\\": 2,\\n                  \\\"script\\\": \\\"if (values.length < 2) { return Double.NaN; } return values[1] - values[0];\\\"\\n                }\\n              },\\n              \\\"gain\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"c\\\": \\\"change\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.c == null || Double.isNaN(params.c)) return Double.NaN; return params.c > 0 ? params.c : 0;\\\"\\n                }\\n              },\\n              \\\"loss\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"c\\\": \\\"change\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.c == null || Double.isNaN(params.c)) return Double.NaN; return params.c < 0 ? -params.c : 0;\\\"\\n                }\\n              },\\n              \\\"avg_gain\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"gain\\\",\\n                  \\\"window\\\": 1000,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) return Double.NaN; double sum = 0; int count = 0; double rsma = Double.NaN; for (double v : values) { if (!Double.isNaN(v)) { sum += v; count++; if (count == 14) rsma = sum / 14; else if (count > 14) rsma = (rsma * 13 + v) / 14; } } return count >= 14 ? rsma : Double.NaN;\\\"\\n                }\\n              },\\n              \\\"avg_loss\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"loss\\\",\\n                  \\\"window\\\": 1000,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) return Double.NaN; double sum = 0; int count = 0; double rsma = Double.NaN; for (double v : values) { if (!Double.isNaN(v)) { sum += v; count++; if (count == 14) rsma = sum / 14; else if (count > 14) rsma = (rsma * 13 + v) / 14; } } return count >= 14 ? rsma : Double.NaN;\\\"\\n                }\\n              },\\n              \\\"rs\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"ag\\\": \\\"avg_gain\\\",\\n                    \\\"al\\\": \\\"avg_loss\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.ag == null || params.al == null || Double.isNaN(params.ag) || Double.isNaN(params.al) || params.al == 0) return Double.NaN; return params.ag / params.al;\\\"\\n                }\\n              },\\n              \\\"rsi\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"rs\\\": \\\"rs\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.rs == null || Double.isNaN(params.rs)) return Double.NaN; return params.rs == 0 ? 0 : 100 - (100 / (1 + params.rs));\\\"\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"size\\\": 0\\n      }\\n    },\\n    \\\"format\\\": {\\n      \\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"\\n    }\\n  },\\n  \\\"transform\\\": [\\n    {\\n      \\\"filter\\\": \\\"datum.rsi != null && datum.rsi.value != null\\\"\\n    },\\n    {\\n      \\\"fold\\\": [\\n        \\\"rsi.value\\\"\\n      ],\\n      \\\"as\\\": [\\n        \\\"series\\\",\\n        \\\"value\\\"\\n      ]\\n    },\\n    {\\n      \\\"calculate\\\": \\\"datum.series === 'rsi.value' ? 'RSI' : null\\\",\\n      \\\"as\\\": \\\"series_name\\\"\\n    },\\n    {\\n      \\\"filter\\\": \\\"datum.value != null\\\"\\n    }\\n  ],\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"line\\\",\\n        \\\"strokeWidth\\\": 2,\\n        \\\"interpolate\\\": \\\"monotone\\\"\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\",\\n          \\\"title\\\": null\\n        },\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"value\\\",\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [0, 100]\\n          },\\n          \\\"title\\\": \\\"\\\"\\n        },\\n        \\\"color\\\": {\\n          \\\"field\\\": \\\"series_name\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [\\n              \\\"RSI\\\"\\n            ],\\n            \\\"range\\\": [\\n              \\\"#F07680\\\"\\n            ]\\n          }\\n        }\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"strokeDash\\\": [4, 4],\\n        \\\"strokeWidth\\\": 1,\\n        \\\"color\\\": \\\"#777777\\\",\\n        \\\"opacity\\\": 0.5\\n      },\\n      \\\"encoding\\\": {\\n        \\\"y\\\": {\\n          \\\"datum\\\": 70\\n        }\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"text\\\",\\n        \\\"align\\\": \\\"left\\\",\\n        \\\"dx\\\": 0,\\n        \\\"dy\\\": -15,\\n        \\\"fontSize\\\": 16,\\n        \\\"color\\\": \\\"#777\\\",\\n        \\\"opacity\\\": 1\\n      },\\n      \\\"encoding\\\": {\\n        \\\"y\\\": {\\n          \\\"datum\\\": 70\\n        },\\n        \\\"text\\\": {\\n          \\\"value\\\": \\\"Overbought (70)\\\"\\n        }\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"strokeDash\\\": [4, 4],\\n        \\\"strokeWidth\\\": 1,\\n        \\\"color\\\": \\\"#777777\\\",\\n        \\\"opacity\\\": 0.5\\n      },\\n      \\\"encoding\\\": {\\n        \\\"y\\\": {\\n          \\\"datum\\\": 30\\n        }\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"text\\\",\\n        \\\"align\\\": \\\"left\\\",\\n        \\\"dx\\\": 0,\\n        \\\"dy\\\": 15,\\n        \\\"fontSize\\\": 16,\\n        \\\"color\\\": \\\"#777\\\",\\n        \\\"opacity\\\": 1\\n      },\\n      \\\"encoding\\\": {\\n        \\\"y\\\": {\\n          \\\"datum\\\": 30\\n        },\\n        \\\"text\\\": {\\n          \\\"value\\\": \\\"Oversold (30)\\\"\\n        }\\n      }\\n    },\\n    {\\n      \\\"description\\\": \\\"Tooltip layer with pivot for multi-series values\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"filter\\\": \\\"hover\\\"\\n        },\\n        {\\n          \\\"pivot\\\": \\\"series_name\\\",\\n          \\\"value\\\": \\\"value\\\",\\n          \\\"groupby\\\": [\\\"key_as_string\\\"],\\n          \\\"limit\\\": 1,\\n          \\\"op\\\": \\\"mean\\\"\\n        }\\n      ],\\n      \\\"params\\\": [\\n        {\\n          \\\"name\\\": \\\"hover\\\",\\n          \\\"select\\\": {\\n            \\\"type\\\": \\\"point\\\",\\n            \\\"encodings\\\": [\\\"x\\\"],\\n            \\\"nearest\\\": true,\\n            \\\"on\\\": \\\"pointerover\\\"\\n          }\\n        }\\n      ],\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"color\\\": \\\"black\\\",\\n        \\\"strokeOpacity\\\": 0.3,\\n        \\\"strokeWidth\\\": 1\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\"\\n        },\\n        \\\"opacity\\\": {\\n          \\\"condition\\\": {\\n            \\\"param\\\": \\\"hover\\\",\\n            \\\"empty\\\": false,\\n            \\\"value\\\": 1\\n          },\\n          \\\"value\\\": 0\\n        },\\n        \\\"tooltip\\\": [\\n          {\\n            \\\"field\\\": \\\"key_as_string\\\",\\n            \\\"type\\\": \\\"temporal\\\",\\n            \\\"title\\\": \\\"Date\\\",\\n            \\\"timeUnit\\\": \\\"utcyearmonthdate\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"RSI\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"RSI\\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          }\\n        ]\\n      }\\n    }\\n  ],\\n  \\\"encoding\\\": {\\n    \\\"color\\\": {\\n      \\\"field\\\": \\\"series_name\\\",\\n      \\\"type\\\": \\\"nominal\\\",\\n      \\\"scale\\\": {\\n        \\\"domain\\\": [\\n          \\\"RSI\\\"\\n        ],\\n        \\\"range\\\": [\\n          \\\"#F07680\\\"\\n        ]\\n      },\\n      \\\"legend\\\": {\\n        \\\"title\\\": null,\\n        \\\"orient\\\": \\\"none\\\",\\n        \\\"direction\\\": \\\"vertical\\\",\\n        \\\"legendX\\\": 15,\\n        \\\"legendY\\\": 15,\\n        \\\"offset\\\": 0,\\n        \\\"labelFontSize\\\": 12,\\n        \\\"symbolSize\\\": 150,\\n        \\\"padding\\\": 8\\n      }\\n    }\\n  }\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2025-11-19T13:52:50.043Z","id":"cd03fee9-b879-47c5-becc-f2240b45fb9a","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2025-11-23T09:03:08.054Z","updated_by":"u_mGBROF_q5bmFCATbLXAcCwKa0k8JvONAwSruelyKA5E_0","version":"WzMwMTgsNl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Stock EOD (OHLC)","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Stock EOD (OHLC)\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  \\\"config\\\": {\\n    \\\"legend\\\": {\\n      \\\"symbolType\\\": \\\"stroke\\\",\\n      \\\"symbolStrokeWidth\\\": 4,\\n      \\\"symbolSize\\\": 200\\n    }\\n  },\\n  \\\"data\\\": {\\n    \\\"url\\\": {\\n      \\\"%context%\\\": true,\\n      \\\"%timefield%\\\": \\\"date_reference\\\",\\n      \\\"index\\\": \\\"quant-agents_stocks-eod_latest\\\",\\n      \\\"body\\\": {\\n        \\\"aggs\\\": {\\n          \\\"time_buckets\\\": {\\n            \\\"date_histogram\\\": {\\n              \\\"field\\\": \\\"date_reference\\\",\\n              \\\"calendar_interval\\\": \\\"1d\\\",\\n              \\\"extended_bounds\\\": {\\n                \\\"min\\\": {\\n                  \\\"%timefilter%\\\": \\\"min\\\"\\n                },\\n                \\\"max\\\": {\\n                  \\\"%timefilter%\\\": \\\"max\\\"\\n                }\\n              },\\n              \\\"min_doc_count\\\": 0\\n            },\\n            \\\"aggs\\\": {\\n              \\\"open\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_open\\\"\\n                }\\n              },\\n              \\\"high\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_high\\\"\\n                }\\n              },\\n              \\\"low\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_low\\\"\\n                }\\n              },\\n              \\\"close\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_close\\\"\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"size\\\": 0\\n      }\\n    },\\n    \\\"format\\\": {\\n      \\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"\\n    }\\n  },\\n  \\\"transform\\\": [\\n    {\\n      \\\"filter\\\": \\\"datum.close.value != null || datum.open.value != null || datum.high.value != null || datum.low.value != null\\\"\\n    },\\n    {\\n      \\\"fold\\\": [\\n        \\\"open.value\\\",\\n        \\\"high.value\\\",\\n        \\\"low.value\\\",\\n        \\\"close.value\\\"\\n      ],\\n      \\\"as\\\": [\\n        \\\"series\\\",\\n        \\\"value\\\"\\n      ]\\n    },\\n    {\\n      \\\"calculate\\\": \\\"datum.series === 'close.value' ? 'Close' : datum.series === 'open.value' ? 'Open' : datum.series === 'high.value' ? 'High' : 'Low'\\\",\\n      \\\"as\\\": \\\"series_name\\\"\\n    },\\n    {\\n      \\\"filter\\\": \\\"datum.value != null\\\"\\n    }\\n  ],\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"line\\\",\\n        \\\"strokeWidth\\\": 3\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\",\\n          \\\"title\\\": null\\n        },\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"value\\\",\\n          \\\"title\\\": null,\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"scale\\\": {\\n            \\\"zero\\\": false\\n          }\\n        },\\n        \\\"color\\\": {\\n          \\\"field\\\": \\\"series_name\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [\\n              \\\"Open\\\",\\n              \\\"High\\\",\\n              \\\"Low\\\",\\n              \\\"Close\\\"\\n            ],\\n            \\\"range\\\": [\\n              \\\"#A38EDB\\\",\\n              \\\"#005733\\\",\\n              \\\"#3300AA\\\",\\n              \\\"#EAAE01\\\"\\n            ]\\n          }\\n        }\\n      }\\n    },\\n    {\\n      \\\"description\\\": \\\"Tooltip layer with pivot for multi-series values\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"filter\\\": \\\"hover\\\"\\n        },\\n        {\\n          \\\"pivot\\\": \\\"series_name\\\",\\n          \\\"value\\\": \\\"value\\\",\\n          \\\"groupby\\\": [\\n            \\\"key_as_string\\\"\\n          ],\\n          \\\"limit\\\": 4,\\n          \\\"op\\\": \\\"mean\\\"\\n        }\\n      ],\\n      \\\"params\\\": [\\n        {\\n          \\\"name\\\": \\\"hover\\\",\\n          \\\"select\\\": {\\n            \\\"type\\\": \\\"point\\\",\\n            \\\"encodings\\\": [\\n              \\\"x\\\"\\n            ],\\n            \\\"nearest\\\": true,\\n            \\\"on\\\": \\\"pointerover\\\"\\n          }\\n        }\\n      ],\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"color\\\": \\\"black\\\",\\n        \\\"strokeOpacity\\\": 0.3,\\n        \\\"strokeWidth\\\": 1\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\"\\n        },\\n        \\\"opacity\\\": {\\n          \\\"condition\\\": {\\n            \\\"param\\\": \\\"hover\\\",\\n            \\\"empty\\\": false,\\n            \\\"value\\\": 1\\n          },\\n          \\\"value\\\": 0\\n        },\\n        \\\"tooltip\\\": [\\n          {\\n            \\\"field\\\": \\\"key_as_string\\\",\\n            \\\"type\\\": \\\"temporal\\\",\\n            \\\"title\\\": \\\"Date: \\\",\\n            \\\"timeUnit\\\": \\\"utcyearmonthdate\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"Open\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Open: \\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"High\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"High: \\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"Low\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Low: \\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"Close\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Close: \\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          }\\n        ]\\n      }\\n    }\\n  ],\\n  \\\"encoding\\\": {\\n    \\\"color\\\": {\\n      \\\"field\\\": \\\"series_name\\\",\\n      \\\"type\\\": \\\"nominal\\\",\\n      \\\"scale\\\": {\\n        \\\"domain\\\": [\\n          \\\"Open\\\",\\n          \\\"High\\\",\\n          \\\"Low\\\",\\n          \\\"Close\\\"\\n        ],\\n        \\\"range\\\": [\\n          \\\"#A38EDB\\\",\\n          \\\"#005733\\\",\\n          \\\"#3300AA\\\",\\n          \\\"#EAAE01\\\"\\n        ]\\n      },\\n      \\\"legend\\\": {\\n        \\\"title\\\": null,\\n        \\\"orient\\\": \\\"none\\\",\\n        \\\"direction\\\": \\\"vertical\\\",\\n        \\\"legendX\\\": 15,\\n        \\\"legendY\\\": 15,\\n        \\\"offset\\\": 0,\\n        \\\"labelFontSize\\\": 12,\\n        \\\"symbolSize\\\": 150,\\n        \\\"padding\\\": 8\\n      }\\n    }\\n  }\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2025-11-19T13:52:50.043Z","id":"768e2502-fab5-478a-bcdf-80a71ccdc0b3","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2025-11-23T09:15:27.271Z","updated_by":"u_mGBROF_q5bmFCATbLXAcCwKa0k8JvONAwSruelyKA5E_0","version":"WzMwMzUsNl0="}
{"excludedObjects":[],"excludedObjectsCount":0,"exportedCount":11,"missingRefCount":0,"missingReferences":[]}