{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Stock Indicator STOCH","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Stock Indicator STOCH\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  \\\"config\\\": {\\n    \\\"legend\\\": {\\n      \\\"symbolType\\\": \\\"stroke\\\",\\n      \\\"symbolStrokeWidth\\\": 4,\\n      \\\"symbolSize\\\": 200\\n    }\\n  },\\n  \\\"data\\\": {\\n    \\\"url\\\": {\\n      \\\"%context%\\\": true,\\n      \\\"%timefield%\\\": \\\"date_reference\\\",\\n      \\\"index\\\": \\\"quant-agents_stocks-eod_latest\\\",\\n      \\\"body\\\": {\\n        \\\"aggs\\\": {\\n          \\\"time_buckets\\\": {\\n            \\\"date_histogram\\\": {\\n              \\\"field\\\": \\\"date_reference\\\",\\n              \\\"calendar_interval\\\": \\\"1d\\\",\\n              \\\"extended_bounds\\\": {\\n                \\\"min\\\": {\\n                  \\\"%timefilter%\\\": \\\"min\\\"\\n                },\\n                \\\"max\\\": {\\n                  \\\"%timefilter%\\\": \\\"max\\\"\\n                }\\n              },\\n              \\\"min_doc_count\\\": 0\\n            },\\n            \\\"aggs\\\": {\\n              \\\"close\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_close\\\"\\n                }\\n              },\\n              \\\"high\\\": {\\n                \\\"max\\\": {\\n                  \\\"field\\\": \\\"val_high\\\"\\n                }\\n              },\\n              \\\"low\\\": {\\n                \\\"min\\\": {\\n                  \\\"field\\\": \\\"val_low\\\"\\n                }\\n              },\\n              \\\"highest_high\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"high\\\",\\n                  \\\"window\\\": 14,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) { return 0; } double max = Double.NEGATIVE_INFINITY; int count = 0; for (double v : values) { if (!Double.isNaN(v)) { if (v > max) { max = v; } count++; } } if (count < 14) { return 0; } return max == Double.NEGATIVE_INFINITY ? 0 : max;\\\"\\n                }\\n              },\\n              \\\"lowest_low\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"low\\\",\\n                  \\\"window\\\": 14,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) { return 0; } double min = Double.POSITIVE_INFINITY; int count = 0; for (double v : values) { if (!Double.isNaN(v)) { if (v < min) { min = v; } count++; } } if (count < 14) { return 0; } return min == Double.POSITIVE_INFINITY ? 0 : min;\\\"\\n                }\\n              },\\n              \\\"raw_k\\\": {\\n                \\\"bucket_script\\\": {\\n                  \\\"buckets_path\\\": {\\n                    \\\"close\\\": \\\"close\\\",\\n                    \\\"highest\\\": \\\"highest_high\\\",\\n                    \\\"lowest\\\": \\\"lowest_low\\\"\\n                  },\\n                  \\\"script\\\": \\\"if (params.close == null || params.highest == null || params.lowest == null) { return 0; } double range = params.highest - params.lowest; if (range == 0) { return 50.0; } double result = 100.0 * (params.close - params.lowest) / range; if (result < 0) { return 0.0; } if (result > 100) { return 100.0; } return result;\\\"\\n                }\\n              },\\n              \\\"fast_d\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"raw_k\\\",\\n                  \\\"window\\\": 3,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) { return 0; } double sum = 0; int count = 0; for (double v : values) { if (!Double.isNaN(v)) { sum += v; count++; } } if (count < 3) { return 0; } return sum / count;\\\"\\n                }\\n              },\\n              \\\"slow_d\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"fast_d\\\",\\n                  \\\"window\\\": 3,\\n                  \\\"script\\\": \\\"if (values == null || values.length == 0) { return 0; } double sum = 0; int count = 0; for (double v : values) { if (!Double.isNaN(v)) { sum += v; count++; } } if (count < 3) { return 0; } return sum / count;\\\"\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"size\\\": 0\\n      }\\n    },\\n    \\\"format\\\": {\\n      \\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"\\n    }\\n  },\\n  \\\"transform\\\": [\\n    {\\n      \\\"filter\\\": \\\"datum.raw_k != null && datum.raw_k.value != null\\\"\\n    },\\n    {\\n      \\\"fold\\\": [\\n        \\\"fast_d.value\\\",\\n        \\\"slow_d.value\\\"\\n      ],\\n      \\\"as\\\": [\\n        \\\"series\\\",\\n        \\\"value\\\"\\n      ]\\n    },\\n    {\\n      \\\"calculate\\\": \\\"datum.series === 'fast_d.value' ? 'Fast %D' : 'Slow %D'\\\",\\n      \\\"as\\\": \\\"series_name\\\"\\n    },\\n    {\\n      \\\"filter\\\": \\\"datum.value != null && !isNaN(datum.value)\\\"\\n    }\\n  ],\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"line\\\",\\n        \\\"strokeWidth\\\": 2,\\n        \\\"interpolate\\\": \\\"monotone\\\"\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\",\\n          \\\"title\\\": null\\n        },\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"value\\\",\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [0, 100]\\n          },\\n          \\\"title\\\": \\\"\\\"\\n        },\\n        \\\"color\\\": {\\n          \\\"field\\\": \\\"series_name\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [\\n              \\\"Fast %D\\\",\\n              \\\"Slow %D\\\"\\n            ],\\n            \\\"range\\\": [\\n              \\\"#F07680\\\",\\n              \\\"#61A2FF\\\"\\n            ]\\n          }\\n        }\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"strokeDash\\\": [4, 4],\\n        \\\"strokeWidth\\\": 1,\\n        \\\"color\\\": \\\"#FF6B6B\\\",\\n        \\\"opacity\\\": 0.5\\n      },\\n      \\\"encoding\\\": {\\n        \\\"y\\\": {\\n          \\\"datum\\\": 75\\n        }\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"text\\\",\\n        \\\"align\\\": \\\"left\\\",\\n        \\\"dx\\\": 5,\\n        \\\"dy\\\": -5,\\n        \\\"fontSize\\\": 10,\\n        \\\"color\\\": \\\"#FF6B6B\\\",\\n        \\\"opacity\\\": 0.7\\n      },\\n      \\\"encoding\\\": {\\n        \\\"y\\\": {\\n          \\\"datum\\\": 75\\n        },\\n        \\\"text\\\": {\\n          \\\"value\\\": \\\"Overbought (75)\\\"\\n        }\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"strokeDash\\\": [4, 4],\\n        \\\"strokeWidth\\\": 1,\\n        \\\"color\\\": \\\"#4ECDC4\\\",\\n        \\\"opacity\\\": 0.5\\n      },\\n      \\\"encoding\\\": {\\n        \\\"y\\\": {\\n          \\\"datum\\\": 25\\n        }\\n      }\\n    },\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"text\\\",\\n        \\\"align\\\": \\\"left\\\",\\n        \\\"dx\\\": 5,\\n        \\\"dy\\\": 5,\\n        \\\"fontSize\\\": 10,\\n        \\\"color\\\": \\\"#4ECDC4\\\",\\n        \\\"opacity\\\": 0.7\\n      },\\n      \\\"encoding\\\": {\\n        \\\"y\\\": {\\n          \\\"datum\\\": 25\\n        },\\n        \\\"text\\\": {\\n          \\\"value\\\": \\\"Oversold (25)\\\"\\n        }\\n      }\\n    },\\n    {\\n      \\\"description\\\": \\\"Tooltip layer with pivot for multi-series values\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"filter\\\": \\\"hover\\\"\\n        },\\n        {\\n          \\\"pivot\\\": \\\"series_name\\\",\\n          \\\"value\\\": \\\"value\\\",\\n          \\\"groupby\\\": [\\\"key_as_string\\\"],\\n          \\\"limit\\\": 2,\\n          \\\"op\\\": \\\"mean\\\"\\n        }\\n      ],\\n      \\\"params\\\": [\\n        {\\n          \\\"name\\\": \\\"hover\\\",\\n          \\\"select\\\": {\\n            \\\"type\\\": \\\"point\\\",\\n            \\\"encodings\\\": [\\\"x\\\"],\\n            \\\"nearest\\\": true,\\n            \\\"on\\\": \\\"pointerover\\\"\\n          }\\n        }\\n      ],\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"color\\\": \\\"black\\\",\\n        \\\"strokeOpacity\\\": 0.3,\\n        \\\"strokeWidth\\\": 1\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\"\\n        },\\n        \\\"opacity\\\": {\\n          \\\"condition\\\": {\\n            \\\"param\\\": \\\"hover\\\",\\n            \\\"empty\\\": false,\\n            \\\"value\\\": 1\\n          },\\n          \\\"value\\\": 0\\n        },\\n        \\\"tooltip\\\": [\\n          {\\n            \\\"field\\\": \\\"key_as_string\\\",\\n            \\\"type\\\": \\\"temporal\\\",\\n            \\\"title\\\": \\\"Date\\\",\\n            \\\"timeUnit\\\": \\\"utcyearmonthdate\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"Fast %D\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Fast %D\\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"Slow %D\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Slow %D\\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          }\\n        ]\\n      }\\n    }\\n  ],\\n  \\\"encoding\\\": {\\n    \\\"color\\\": {\\n      \\\"field\\\": \\\"series_name\\\",\\n      \\\"type\\\": \\\"nominal\\\",\\n      \\\"scale\\\": {\\n        \\\"domain\\\": [\\n          \\\"Fast %D\\\",\\n          \\\"Slow %D\\\"\\n        ],\\n        \\\"range\\\": [\\n          \\\"#F07680\\\",\\n          \\\"#61A2FF\\\"\\n        ]\\n      },\\n      \\\"legend\\\": {\\n        \\\"title\\\": null,\\n        \\\"orient\\\": \\\"none\\\",\\n        \\\"direction\\\": \\\"vertical\\\",\\n        \\\"legendX\\\": 15,\\n        \\\"legendY\\\": 15,\\n        \\\"offset\\\": 0,\\n        \\\"labelFontSize\\\": 12,\\n        \\\"symbolSize\\\": 150,\\n        \\\"padding\\\": 8\\n      }\\n    }\\n  }\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2025-11-18T20:00:44.794Z","id":"321ab849-dae5-419d-a71f-07a1106a5f26","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2025-11-18T20:03:34.784Z","updated_by":"u_mGBROF_q5bmFCATbLXAcCwKa0k8JvONAwSruelyKA5E_0","version":"WzE5NzIsNl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Stock EOD Trading Volume","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Stock EOD Trading Volume\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  \\\"config\\\": {\\n    \\\"legend\\\": {\\n      \\\"symbolType\\\": \\\"stroke\\\",\\n      \\\"symbolStrokeWidth\\\": 4,\\n      \\\"symbolSize\\\": 200\\n    }\\n  },\\n  \\\"data\\\": {\\n    \\\"url\\\": {\\n      \\\"%context%\\\": true,\\n      \\\"%timefield%\\\": \\\"date_reference\\\",\\n      \\\"index\\\": \\\"quant-agents_stocks-eod_latest\\\",\\n      \\\"body\\\": {\\n        \\\"aggs\\\": {\\n          \\\"time_buckets\\\": {\\n            \\\"date_histogram\\\": {\\n              \\\"field\\\": \\\"date_reference\\\",\\n              \\\"calendar_interval\\\": \\\"1d\\\",\\n              \\\"extended_bounds\\\": {\\n                \\\"min\\\": {\\n                  \\\"%timefilter%\\\": \\\"min\\\"\\n                },\\n                \\\"max\\\": {\\n                  \\\"%timefilter%\\\": \\\"max\\\"\\n                }\\n              },\\n              \\\"min_doc_count\\\": 0\\n            },\\n            \\\"aggs\\\": {\\n              \\\"volume\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_volume\\\"\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"size\\\": 0\\n      }\\n    },\\n    \\\"format\\\": {\\n      \\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"\\n    }\\n  },\\n  \\\"transform\\\": [\\n    {\\n      \\\"filter\\\": \\\"datum.volume.value != null\\\"\\n    },\\n    {\\n      \\\"fold\\\": [\\n        \\\"volume.value\\\"\\n      ],\\n      \\\"as\\\": [\\n        \\\"series\\\",\\n        \\\"value\\\"\\n      ]\\n    },\\n    {\\n      \\\"calculate\\\": \\\"datum.series === 'volume.value' ? 'Volume' : ''\\\",\\n      \\\"as\\\": \\\"series_name\\\"\\n    },\\n    {\\n      \\\"filter\\\": \\\"datum.value != null\\\"\\n    }\\n  ],\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"bar\\\"\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\",\\n          \\\"title\\\": null\\n        },\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"value\\\",\\n          \\\"title\\\": null,\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"scale\\\": {\\n            \\\"zero\\\": false\\n          }\\n        },\\n        \\\"color\\\": {\\n          \\\"field\\\": \\\"series_name\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [\\n              \\\"Volume\\\"\\n            ],\\n            \\\"range\\\": [\\n              \\\"#680EE0\\\"\\n            ]\\n          }\\n        }\\n      }\\n    },\\n    {\\n      \\\"description\\\": \\\"Tooltip layer with pivot for multi-series values\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"filter\\\": \\\"hover\\\"\\n        },\\n        {\\n          \\\"pivot\\\": \\\"series_name\\\",\\n          \\\"value\\\": \\\"value\\\",\\n          \\\"groupby\\\": [\\n            \\\"key_as_string\\\"\\n          ],\\n          \\\"limit\\\": 4,\\n          \\\"op\\\": \\\"mean\\\"\\n        }\\n      ],\\n      \\\"params\\\": [\\n        {\\n          \\\"name\\\": \\\"hover\\\",\\n          \\\"select\\\": {\\n            \\\"type\\\": \\\"point\\\",\\n            \\\"encodings\\\": [\\n              \\\"x\\\"\\n            ],\\n            \\\"nearest\\\": true,\\n            \\\"on\\\": \\\"pointerover\\\"\\n          }\\n        }\\n      ],\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"color\\\": \\\"black\\\",\\n        \\\"strokeOpacity\\\": 0.3,\\n        \\\"strokeWidth\\\": 1\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\"\\n        },\\n        \\\"opacity\\\": {\\n          \\\"condition\\\": {\\n            \\\"param\\\": \\\"hover\\\",\\n            \\\"empty\\\": false,\\n            \\\"value\\\": 1\\n          },\\n          \\\"value\\\": 0\\n        },\\n        \\\"tooltip\\\": [\\n          {\\n            \\\"field\\\": \\\"key_as_string\\\",\\n            \\\"type\\\": \\\"temporal\\\",\\n            \\\"title\\\": \\\"Date: \\\",\\n            \\\"timeUnit\\\": \\\"utcyearmonthdate\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"Volume\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Volume: \\\",\\n            \\\"format\\\": \\\".0f\\\"\\n          }\\n        ]\\n      }\\n    }\\n  ],\\n  \\\"encoding\\\": {\\n    \\\"color\\\": {\\n      \\\"field\\\": \\\"series_name\\\",\\n      \\\"type\\\": \\\"nominal\\\",\\n      \\\"scale\\\": {\\n        \\\"domain\\\": [\\n          \\\"Volume\\\"\\n        ],\\n        \\\"range\\\": [\\n          \\\"#680EE0\\\"\\n        ]\\n      },\\n      \\\"legend\\\": {\\n        \\\"title\\\": null,\\n        \\\"orient\\\": \\\"none\\\",\\n        \\\"direction\\\": \\\"vertical\\\",\\n        \\\"legendX\\\": 15,\\n        \\\"legendY\\\": 15,\\n        \\\"offset\\\": 0,\\n        \\\"labelFontSize\\\": 12,\\n        \\\"symbolSize\\\": 150,\\n        \\\"padding\\\": 8\\n      }\\n    }\\n  }\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2025-11-18T20:00:44.794Z","id":"bfa6dace-96ea-4584-9db3-f07749ad9fb4","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2025-11-18T20:00:44.794Z","version":"WzE5NjIsNl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Stock EOD (OHLC)","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Stock EOD (OHLC)\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  \\\"config\\\": {\\n    \\\"legend\\\": {\\n      \\\"symbolType\\\": \\\"stroke\\\",\\n      \\\"symbolStrokeWidth\\\": 4,\\n      \\\"symbolSize\\\": 200\\n    }\\n  },\\n  \\\"data\\\": {\\n    \\\"url\\\": {\\n      \\\"%context%\\\": true,\\n      \\\"%timefield%\\\": \\\"date_reference\\\",\\n      \\\"index\\\": \\\"quant-agents_stocks-eod_latest\\\",\\n      \\\"body\\\": {\\n        \\\"aggs\\\": {\\n          \\\"time_buckets\\\": {\\n            \\\"date_histogram\\\": {\\n              \\\"field\\\": \\\"date_reference\\\",\\n              \\\"calendar_interval\\\": \\\"1d\\\",\\n              \\\"extended_bounds\\\": {\\n                \\\"min\\\": {\\n                  \\\"%timefilter%\\\": \\\"min\\\"\\n                },\\n                \\\"max\\\": {\\n                  \\\"%timefilter%\\\": \\\"max\\\"\\n                }\\n              },\\n              \\\"min_doc_count\\\": 0\\n            },\\n            \\\"aggs\\\": {\\n              \\\"open\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_open\\\"\\n                }\\n              },\\n              \\\"high\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_high\\\"\\n                }\\n              },\\n              \\\"low\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_low\\\"\\n                }\\n              },\\n              \\\"close\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_close\\\"\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"size\\\": 0\\n      }\\n    },\\n    \\\"format\\\": {\\n      \\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"\\n    }\\n  },\\n  \\\"transform\\\": [\\n    {\\n      \\\"filter\\\": \\\"datum.close.value != null || datum.open.value != null || datum.high.value != null || datum.low.value != null\\\"\\n    },\\n    {\\n      \\\"fold\\\": [\\n        \\\"open.value\\\",\\n        \\\"high.value\\\",\\n        \\\"low.value\\\",\\n        \\\"close.value\\\"\\n      ],\\n      \\\"as\\\": [\\n        \\\"series\\\",\\n        \\\"value\\\"\\n      ]\\n    },\\n    {\\n      \\\"calculate\\\": \\\"datum.series === 'close.value' ? 'Close' : datum.series === 'open.value' ? 'Open' : datum.series === 'high.value' ? 'High' : 'Low'\\\",\\n      \\\"as\\\": \\\"series_name\\\"\\n    },\\n    {\\n      \\\"filter\\\": \\\"datum.value != null\\\"\\n    }\\n  ],\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"line\\\",\\n        \\\"strokeWidth\\\": 3\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\",\\n          \\\"title\\\": null\\n        },\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"value\\\",\\n          \\\"title\\\": null,\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"scale\\\": {\\n            \\\"zero\\\": false\\n          }\\n        },\\n        \\\"color\\\": {\\n          \\\"field\\\": \\\"series_name\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [\\n              \\\"Open\\\",\\n              \\\"High\\\",\\n              \\\"Low\\\",\\n              \\\"Close\\\"\\n            ],\\n            \\\"range\\\": [\\n              \\\"#A38EDB\\\",\\n              \\\"#FF5733\\\",\\n              \\\"#33FF57\\\",\\n              \\\"#EAAE01\\\"\\n            ]\\n          }\\n        }\\n      }\\n    },\\n    {\\n      \\\"description\\\": \\\"Tooltip layer with pivot for multi-series values\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"filter\\\": \\\"hover\\\"\\n        },\\n        {\\n          \\\"pivot\\\": \\\"series_name\\\",\\n          \\\"value\\\": \\\"value\\\",\\n          \\\"groupby\\\": [\\n            \\\"key_as_string\\\"\\n          ],\\n          \\\"limit\\\": 4,\\n          \\\"op\\\": \\\"mean\\\"\\n        }\\n      ],\\n      \\\"params\\\": [\\n        {\\n          \\\"name\\\": \\\"hover\\\",\\n          \\\"select\\\": {\\n            \\\"type\\\": \\\"point\\\",\\n            \\\"encodings\\\": [\\n              \\\"x\\\"\\n            ],\\n            \\\"nearest\\\": true,\\n            \\\"on\\\": \\\"pointerover\\\"\\n          }\\n        }\\n      ],\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"color\\\": \\\"black\\\",\\n        \\\"strokeOpacity\\\": 0.3,\\n        \\\"strokeWidth\\\": 1\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\"\\n        },\\n        \\\"opacity\\\": {\\n          \\\"condition\\\": {\\n            \\\"param\\\": \\\"hover\\\",\\n            \\\"empty\\\": false,\\n            \\\"value\\\": 1\\n          },\\n          \\\"value\\\": 0\\n        },\\n        \\\"tooltip\\\": [\\n          {\\n            \\\"field\\\": \\\"key_as_string\\\",\\n            \\\"type\\\": \\\"temporal\\\",\\n            \\\"title\\\": \\\"Date: \\\",\\n            \\\"timeUnit\\\": \\\"utcyearmonthdate\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"Open\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Open: \\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"High\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"High: \\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"Low\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Low: \\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"Close\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Close: \\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          }\\n        ]\\n      }\\n    }\\n  ],\\n  \\\"encoding\\\": {\\n    \\\"color\\\": {\\n      \\\"field\\\": \\\"series_name\\\",\\n      \\\"type\\\": \\\"nominal\\\",\\n      \\\"scale\\\": {\\n        \\\"domain\\\": [\\n          \\\"Open\\\",\\n          \\\"High\\\",\\n          \\\"Low\\\",\\n          \\\"Close\\\"\\n        ],\\n        \\\"range\\\": [\\n          \\\"#A38EDB\\\",\\n          \\\"#FF5733\\\",\\n          \\\"#33FF57\\\",\\n          \\\"#EAAE01\\\"\\n        ]\\n      },\\n      \\\"legend\\\": {\\n        \\\"title\\\": null,\\n        \\\"orient\\\": \\\"none\\\",\\n        \\\"direction\\\": \\\"vertical\\\",\\n        \\\"legendX\\\": 15,\\n        \\\"legendY\\\": 15,\\n        \\\"offset\\\": 0,\\n        \\\"labelFontSize\\\": 12,\\n        \\\"symbolSize\\\": 150,\\n        \\\"padding\\\": 8\\n      }\\n    }\\n  }\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2025-11-18T20:00:44.794Z","id":"768e2502-fab5-478a-bcdf-80a71ccdc0b3","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2025-11-18T20:00:44.794Z","version":"WzE5NjMsNl0="}
{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Stock Indicator EMA","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Stock Indicator EMA\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  \\\"config\\\": {\\n    \\\"legend\\\": {\\n      \\\"symbolType\\\": \\\"stroke\\\",\\n      \\\"symbolStrokeWidth\\\": 4,\\n      \\\"symbolSize\\\": 200\\n    }\\n  },\\n  \\\"data\\\": {\\n    \\\"url\\\": {\\n      \\\"%context%\\\": true,\\n      \\\"%timefield%\\\": \\\"date_reference\\\",\\n      \\\"index\\\": \\\"quant-agents_stocks-eod_latest\\\",\\n      \\\"body\\\": {\\n        \\\"aggs\\\": {\\n          \\\"time_buckets\\\": {\\n            \\\"date_histogram\\\": {\\n              \\\"field\\\": \\\"date_reference\\\",\\n              \\\"calendar_interval\\\": \\\"1d\\\",\\n              \\\"extended_bounds\\\": {\\n                \\\"min\\\": {\\n                  \\\"%timefilter%\\\": \\\"min\\\"\\n                },\\n                \\\"max\\\": {\\n                  \\\"%timefilter%\\\": \\\"max\\\"\\n                }\\n              },\\n              \\\"min_doc_count\\\": 0\\n            },\\n            \\\"aggs\\\": {\\n              \\\"close\\\": {\\n                \\\"avg\\\": {\\n                  \\\"field\\\": \\\"val_close\\\"\\n                }\\n              },\\n              \\\"ema10\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"close\\\",\\n                  \\\"window\\\": 1000,\\n                  \\\"script\\\": \\\"double ewma = Double.NaN; double alpha = 2.0 / (10 + 1); for (int i=0; i<values.length; i++) { if (!Double.isNaN(values[i])) { if (Double.isNaN(ewma)) ewma = values[i]; else ewma = alpha * values[i] + (1 - alpha) * ewma; } } return ewma;\\\"\\n                }\\n              },\\n              \\\"ema20\\\": {\\n                \\\"moving_fn\\\": {\\n                  \\\"buckets_path\\\": \\\"close\\\",\\n                  \\\"window\\\": 1000,\\n                  \\\"script\\\": \\\"double ewma = Double.NaN; double alpha = 2.0 / (20 + 1); for (int i=0; i<values.length; i++) { if (!Double.isNaN(values[i])) { if (Double.isNaN(ewma)) ewma = values[i]; else ewma = alpha * values[i] + (1 - alpha) * ewma; } } return ewma;\\\"\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"size\\\": 0\\n      }\\n    },\\n    \\\"format\\\": {\\n      \\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"\\n    }\\n  },\\n  \\\"transform\\\": [\\n    {\\n      \\\"filter\\\": \\\"datum.close.value != null\\\"\\n    },\\n    {\\n      \\\"fold\\\": [\\n        \\\"close.value\\\",\\n        \\\"ema10.value\\\",\\n        \\\"ema20.value\\\"\\n      ],\\n      \\\"as\\\": [\\n        \\\"series\\\",\\n        \\\"value\\\"\\n      ]\\n    },\\n    {\\n      \\\"calculate\\\": \\\"datum.series === 'close.value' ? 'Close' : datum.series === 'ema10.value' ? 'EMA 10' : 'EMA 20'\\\",\\n      \\\"as\\\": \\\"series_name\\\"\\n    },\\n    {\\n      \\\"filter\\\": \\\"datum.value != null\\\"\\n    }\\n  ],\\n  \\\"layer\\\": [\\n    {\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"line\\\",\\n        \\\"strokeWidth\\\": 3\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\",\\n          \\\"title\\\": null\\n        },\\n        \\\"y\\\": {\\n          \\\"field\\\": \\\"value\\\",\\n          \\\"title\\\": null,\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"scale\\\": {\\n            \\\"zero\\\": false\\n          }\\n        },\\n        \\\"color\\\": {\\n          \\\"field\\\": \\\"series_name\\\",\\n          \\\"type\\\": \\\"nominal\\\",\\n          \\\"scale\\\": {\\n            \\\"domain\\\": [\\n              \\\"Close\\\",\\n              \\\"EMA 10\\\",\\n              \\\"EMA 20\\\"\\n            ],\\n            \\\"range\\\": [\\n              \\\"#EAAE01\\\",\\n              \\\"#F07680\\\",\\n              \\\"#61A2FF\\\"\\n            ]\\n          }\\n        }\\n      }\\n    },\\n    {\\n      \\\"description\\\": \\\"Tooltip layer with pivot for multi-series values\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"filter\\\": \\\"hover\\\"\\n        },\\n        {\\n          \\\"pivot\\\": \\\"series_name\\\",\\n          \\\"value\\\": \\\"value\\\",\\n          \\\"groupby\\\": [\\\"key_as_string\\\"],\\n          \\\"limit\\\": 3,\\n          \\\"op\\\": \\\"mean\\\"\\n        }\\n      ],\\n      \\\"params\\\": [\\n        {\\n          \\\"name\\\": \\\"hover\\\",\\n          \\\"select\\\": {\\n            \\\"type\\\": \\\"point\\\",\\n            \\\"encodings\\\": [\\\"x\\\"],\\n            \\\"nearest\\\": true,\\n            \\\"on\\\": \\\"pointerover\\\"\\n          }\\n        }\\n      ],\\n      \\\"mark\\\": {\\n        \\\"type\\\": \\\"rule\\\",\\n        \\\"color\\\": \\\"black\\\",\\n        \\\"strokeOpacity\\\": 0.3,\\n        \\\"strokeWidth\\\": 1\\n      },\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"key_as_string\\\",\\n          \\\"type\\\": \\\"temporal\\\"\\n        },\\n        \\\"opacity\\\": {\\n          \\\"condition\\\": {\\n            \\\"param\\\": \\\"hover\\\",\\n            \\\"empty\\\": false,\\n            \\\"value\\\": 1\\n          },\\n          \\\"value\\\": 0\\n        },\\n        \\\"tooltip\\\": [\\n          {\\n            \\\"field\\\": \\\"key_as_string\\\",\\n            \\\"type\\\": \\\"temporal\\\",\\n            \\\"title\\\": \\\"Date: \\\",\\n            \\\"timeUnit\\\": \\\"utcyearmonthdate\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"Close\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"Close: \\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"EMA 10\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"EMA 10: \\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          },\\n          {\\n            \\\"field\\\": \\\"EMA 20\\\",\\n            \\\"type\\\": \\\"quantitative\\\",\\n            \\\"title\\\": \\\"EMA 20: \\\",\\n            \\\"format\\\": \\\".2f\\\"\\n          }\\n        ]\\n      }\\n    }\\n  ],\\n  \\\"encoding\\\": {\\n    \\\"color\\\": {\\n      \\\"field\\\": \\\"series_name\\\",\\n      \\\"type\\\": \\\"nominal\\\",\\n      \\\"scale\\\": {\\n        \\\"domain\\\": [\\n          \\\"Close\\\",\\n          \\\"EMA 10\\\",\\n          \\\"EMA 20\\\"\\n        ],\\n        \\\"range\\\": [\\n          \\\"#EAAE01\\\",\\n          \\\"#F07680\\\",\\n          \\\"#61A2FF\\\"\\n        ]\\n      },\\n      \\\"legend\\\": {\\n        \\\"title\\\": null,\\n        \\\"orient\\\": \\\"none\\\",\\n        \\\"direction\\\": \\\"vertical\\\",\\n        \\\"legendX\\\": 15,\\n        \\\"legendY\\\": 15,\\n        \\\"offset\\\": 0,\\n        \\\"labelFontSize\\\": 12,\\n        \\\"symbolSize\\\": 150,\\n        \\\"padding\\\": 8\\n      }\\n    }\\n  }\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2025-11-18T20:00:44.794Z","id":"50e21226-a1d5-49b0-855c-04b8ec075f5e","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2025-11-18T20:00:44.794Z","version":"WzE5NjQsNl0="}
{"excludedObjects":[],"excludedObjectsCount":0,"exportedCount":4,"missingRefCount":0,"missingReferences":[]}